{
  "version": 3,
  "sources": ["../../../../../infra/src/handlers/forms-public.ts", "../../../../../infra/src/lib/formsToken.ts", "../../../../../infra/src/lib/ids.ts", "../../../../../infra/src/lib/dynamo.ts", "../../../../../infra/src/handlers/common.ts", "../../../../../infra/src/lib/session.ts", "../../../../../infra/src/handlers/cors.ts"],
  "sourcesContent": ["import { APIGatewayProxyEventV2 } from 'aws-lambda';\nimport { Handler } from './common';\nimport { sign, verify } from '../lib/formsToken';\nimport { newId } from '../lib/ids';\nimport { getItem, putItem, queryByPK, queryGSI1 } from '../lib/dynamo';\nimport { response } from './cors';\n\nexport const handler: Handler = async (event: APIGatewayProxyEventV2) => {\n  const method = (event.requestContext.http?.method || '').toUpperCase();\n  const path = event.requestContext.http?.path || '';\n  const originHdr = event.headers['origin'] || event.headers['Origin'] || event.headers['origin'] || '';\n  const host = event.headers['x-forwarded-host'] || event.headers['Host'] || '';\n  const proto = event.headers['x-forwarded-proto'] || 'https';\n  const resolvedOrigin = originHdr || `${proto}://${host}`;\n  if (!method) return response(400, { ok: false, message: 'Missing method' }, resolvedOrigin);\n\n  if (method === 'OPTIONS') {\n    return response(200, { ok: true }, resolvedOrigin);\n  }\n\n  // POST /forms/issue\n  if (method === 'POST' && path.endsWith('/forms/issue')) {\n    if (!event.body) return response(400, { ok: false, error: 'Missing body' }, resolvedOrigin);\n    const { agencyEmail } = JSON.parse(event.body);\n    if (!agencyEmail) return response(400, { ok: false, error: 'Missing agencyEmail' }, resolvedOrigin);\n    const payload = {\n      agencyEmail,\n      iat: Date.now(),\n      exp: Date.now() + 1000 * 60 * 60 * 24 * 30,\n    };\n    const token = sign(payload);\n    const url = `${resolvedOrigin}/forms/${token}`;\n    return response(200, { ok: true, token, url }, resolvedOrigin);\n  }\n\n  // GET /forms/agency\n  if (method === 'GET' && path.endsWith('/forms/agency')) {\n    const token = (event.queryStringParameters?.token || '').trim();\n    const payload = verify<{ agencyEmail: string; exp?: number }>(token);\n    if (!payload?.agencyEmail) return response(400, { ok: false, error: 'Invalid token' }, resolvedOrigin);\n    const byEmail = await queryGSI1(`EMAIL#${payload.agencyEmail}`, 'AGENCY#');\n    const agency = (byEmail || [])[0];\n    if (!agency) return response(404, { ok: false, error: 'Agency not found' }, resolvedOrigin);\n    return response(200, {\n      ok: true,\n      agency: {\n        name: agency.name,\n        email: agency.email,\n        settings: agency.settings || {},\n      },\n    }, resolvedOrigin);\n  }\n\n  // POST /forms/submit\n  if (method === 'POST' && path.endsWith('/forms/submit')) {\n    if (!event.body) return response(400, { ok: false, error: 'Missing body' }, resolvedOrigin);\n    const body = JSON.parse(event.body || '{}');\n    const token = (body.token || '').trim();\n    const form = body.form || {};\n    const payload = verify<{ agencyEmail: string; exp?: number }>(token);\n    if (!payload?.agencyEmail) return response(400, { ok: false, error: 'Invalid token' }, resolvedOrigin);\n    const safeForm = form || {};\n    const id = newId('form');\n    const rec = {\n      PK: `AGENCY#${payload.agencyEmail}`,\n      SK: `FORM#${id}`,\n      id,\n      createdAt: Date.now(),\n      consumed: false,\n      agencyEmail: payload.agencyEmail,\n      data: {\n        email: safeForm.email || '',\n        phone: safeForm.phone || '',\n        password: safeForm.password || '',\n        firstName: safeForm.firstName || '',\n        lastName: safeForm.lastName || '',\n        sport: safeForm.sport || '',\n        division: safeForm.division || '',\n        graduationYear: safeForm.graduationYear || '',\n        profileImageUrl: safeForm.profileImageUrl || '',\n        radar: safeForm.radar || {},\n      },\n    };\n    await putItem(rec);\n    return response(200, { ok: true, id }, resolvedOrigin);\n  }\n\n  // GET /forms/submissions\n  if (method === 'GET' && path.endsWith('/forms/submissions')) {\n    const agencyEmail = (event.queryStringParameters?.agencyEmail || '').trim();\n    if (!agencyEmail) return response(400, { ok: false, error: 'Missing agencyEmail' }, resolvedOrigin);\n    const items = await queryByPK(`AGENCY#${agencyEmail}`, 'FORM#');\n    const pending = (items || []).filter((i: any) => !i.consumed);\n    return response(200, { ok: true, items: pending }, resolvedOrigin);\n  }\n\n  // POST /forms/consume\n  if (method === 'POST' && path.endsWith('/forms/consume')) {\n    if (!event.body) return response(400, { ok: false, error: 'Missing body' }, resolvedOrigin);\n    const { agencyEmail, ids } = JSON.parse(event.body || '{}');\n    if (!agencyEmail || !Array.isArray(ids)) return response(400, { ok: false, error: 'Missing parameters' }, resolvedOrigin);\n    for (const id of ids) {\n      const item = await getItem({ PK: `AGENCY#${agencyEmail}`, SK: `FORM#${id}` });\n      if (item) await putItem({ ...item, consumed: true });\n    }\n    return response(200, { ok: true }, resolvedOrigin);\n  }\n\n  return response(400, { ok: false, message: `Unsupported path ${path}` }, resolvedOrigin);\n};\n\n\n", "import crypto from 'crypto';\n\nconst ALG = 'sha256';\nconst SECRET = process.env.FORMS_SECRET || 'dev-forms-secret-change-me';\n\nconst enc = (o: any) => Buffer.from(JSON.stringify(o)).toString('base64url');\n\nexport function sign(payload: object): string {\n  const header = { alg: 'HS256', typ: 'JWT' };\n  const head = enc(header);\n  const body = enc(payload);\n  const hmac = crypto.createHmac(ALG, SECRET).update(`${head}.${body}`).digest('base64url');\n  return `${head}.${body}.${hmac}`;\n}\n\nexport function verify<T = any>(token: string): T | null {\n  const parts = token.split('.');\n  if (parts.length !== 3) return null;\n  const [head, body, sig] = parts;\n  const hmac = crypto.createHmac(ALG, SECRET).update(`${head}.${body}`).digest('base64url');\n  if (hmac !== sig) return null;\n  try {\n    const json = JSON.parse(Buffer.from(body, 'base64url').toString('utf-8'));\n    if (json.exp && Date.now() > Number(json.exp)) return null;\n    return json as T;\n  } catch {\n    return null;\n  }\n}\n\n\n", "export function newId(prefix: string) {\n  const rand = globalThis.crypto?.randomUUID?.() ?? `${Date.now()}-${Math.random().toString(36).slice(2, 10)}`;\n  return `${prefix}-${rand}`.replace(/[^a-zA-Z0-9-_]/g, '');\n}\n\n", "import { GetCommand, PutCommand, QueryCommand, UpdateCommand, DeleteCommand } from '@aws-sdk/lib-dynamodb';\nimport { docClient } from '../handlers/common';\n\nconst TABLE_NAME = process.env.TABLE_NAME || 'agency-narrative-crm';\n\nexport async function putItem(item: Record<string, unknown>) {\n  await docClient.send(new PutCommand({ TableName: TABLE_NAME, Item: item }));\n  return item;\n}\n\nexport async function getItem(key: { PK: string; SK: string }) {\n  const res = await docClient.send(new GetCommand({ TableName: TABLE_NAME, Key: key }));\n  return res.Item;\n}\n\nexport async function queryByPK(PK: string, beginsWith?: string) {\n  const res = await docClient.send(\n    new QueryCommand({\n      TableName: TABLE_NAME,\n      KeyConditionExpression: beginsWith ? 'PK = :pk AND begins_with(SK, :sk)' : 'PK = :pk',\n      ExpressionAttributeValues: beginsWith ? { ':pk': PK, ':sk': beginsWith } : { ':pk': PK },\n    }),\n  );\n  return res.Items ?? [];\n}\n\nexport async function queryGSI1(GSI1PK: string, beginsWith?: string) {\n  const res = await docClient.send(\n    new QueryCommand({\n      TableName: TABLE_NAME,\n      IndexName: 'GSI1',\n      KeyConditionExpression: beginsWith ? 'GSI1PK = :g1pk AND begins_with(GSI1SK, :g1sk)' : 'GSI1PK = :g1pk',\n      ExpressionAttributeValues: beginsWith ? { ':g1pk': GSI1PK, ':g1sk': beginsWith } : { ':g1pk': GSI1PK },\n    }),\n  );\n  return res.Items ?? [];\n}\n\nexport async function updateItem(params: {\n  key: { PK: string; SK: string };\n  updateExpression: string;\n  expressionAttributeValues: Record<string, unknown>;\n  expressionAttributeNames?: Record<string, string>;\n}) {\n  const res = await docClient.send(\n    new UpdateCommand({\n      TableName: TABLE_NAME,\n      Key: params.key,\n      UpdateExpression: params.updateExpression,\n      ExpressionAttributeValues: params.expressionAttributeValues,\n      ExpressionAttributeNames: params.expressionAttributeNames,\n      ReturnValues: 'ALL_NEW',\n    }),\n  );\n  return res.Attributes;\n}\n\nexport async function deleteItem(key: { PK: string; SK: string }) {\n  await docClient.send(new DeleteCommand({ TableName: TABLE_NAME, Key: key }));\n}\n\n", "import { APIGatewayProxyEventV2, APIGatewayProxyResultV2 } from 'aws-lambda';\nimport { DynamoDBClient } from '@aws-sdk/client-dynamodb';\nimport { DynamoDBDocumentClient } from '@aws-sdk/lib-dynamodb';\nimport { SessionContext } from '../lib/models';\nimport { parseSessionFromRequest } from '../lib/session';\n\nconst client = new DynamoDBClient({});\nexport const docClient = DynamoDBDocumentClient.from(client);\n\nconst DEBUG_SESSION = process.env.DEBUG_SESSION === 'true';\n\nexport type Handler = (event: APIGatewayProxyEventV2) => Promise<APIGatewayProxyResultV2>;\n\nexport function jsonResponse(statusCode: number, body: unknown): APIGatewayProxyResultV2 {\n  return {\n    statusCode,\n    headers: { 'content-type': 'application/json' },\n    body: JSON.stringify(body),\n  };\n}\n\nexport function notImplemented(resource: string, method: string) {\n  return jsonResponse(501, { ok: false, message: `${method} ${resource} not implemented` });\n}\n\nexport function badRequest(message: string) {\n  return jsonResponse(400, { ok: false, message });\n}\n\nexport function ok(body: unknown) {\n  return jsonResponse(200, body);\n}\n\nexport function getSession(event: APIGatewayProxyEventV2): SessionContext | null {\n  const origin = event.headers?.origin || event.headers?.Origin || (event.headers as any)?.['origin'] || '';\n  const parsed = parseSessionFromRequest(event);\n  if (DEBUG_SESSION) {\n    console.log('session_debug', {\n      origin,\n      hasCookiesArray: Array.isArray(event.cookies) && event.cookies.length > 0,\n      hasCookieHeader: Boolean((event.headers as any)?.cookie || (event.headers as any)?.Cookie),\n      session: parsed,\n      method: event.requestContext?.http?.method,\n      path: event.rawPath,\n    });\n  }\n  if (parsed) return parsed;\n  // Fallback for temporary header-based dev mode\n  const agencyId = (event.headers['x-agency-id'] as string) || (event.headers['X-Agency-Id'] as string);\n  const agencyEmail = (event.headers['x-agency-email'] as string) || (event.headers['X-Agency-Email'] as string);\n  const role = (event.headers['x-role'] as SessionContext['role']) || 'agency';\n  if (!agencyId) return null;\n  const fallback = { agencyId, agencyEmail, role };\n  if (DEBUG_SESSION) {\n    console.log('session_debug_fallback', { origin, fallback });\n  }\n  return fallback;\n}\n\nexport function requireSession(event: APIGatewayProxyEventV2): SessionContext | null {\n  return getSession(event);\n}\n\n", "import { APIGatewayProxyEventV2 } from 'aws-lambda';\nimport { createHmac, timingSafeEqual } from 'crypto';\nimport { SessionContext } from './models';\n\nconst SECRET = process.env.SESSION_SECRET || 'dev-secret-change-me';\nconst COOKIE_NAME = 'an_session';\nconst COOKIE_DOMAIN = process.env.COOKIE_DOMAIN || '.myrecruiteragency.com';\n\nfunction sign(payload: string) {\n  const sig = createHmac('sha256', SECRET).update(payload).digest('base64url');\n  return `${payload}.${sig}`;\n}\n\nfunction verify(token: string) {\n  const idx = token.lastIndexOf('.');\n  if (idx < 0) return null;\n  const payload = token.slice(0, idx);\n  const sig = token.slice(idx + 1);\n  const expected = createHmac('sha256', SECRET).update(payload).digest('base64url');\n  const a = Buffer.from(sig);\n  const b = Buffer.from(expected);\n  if (a.length !== b.length || !timingSafeEqual(a, b)) return null;\n  try {\n    return JSON.parse(Buffer.from(payload, 'base64url').toString('utf8')) as SessionContext;\n  } catch {\n    return null;\n  }\n}\n\nexport function encodeSession(session: SessionContext) {\n  const payload = Buffer.from(JSON.stringify(session)).toString('base64url');\n  return sign(payload);\n}\n\nexport function parseSession(token?: string | null): SessionContext | null {\n  if (!token) return null;\n  return verify(token);\n}\n\nfunction parseCookie(header?: string): Record<string, string> {\n  if (!header) return {};\n  return header.split(';').reduce<Record<string, string>>((acc, part) => {\n    const [k, v] = part.trim().split('=');\n    if (k && v) acc[k] = v;\n    return acc;\n  }, {});\n}\n\nfunction readCookieString(event: APIGatewayProxyEventV2): string | undefined {\n  if (event.cookies && event.cookies.length > 0) {\n    return event.cookies.join('; ');\n  }\n  return event.headers.cookie || (event.headers as any).Cookie;\n}\n\nexport function parseSessionFromRequest(event: APIGatewayProxyEventV2): SessionContext | null {\n  const cookieHeader = readCookieString(event);\n  const cookies = parseCookie(cookieHeader);\n  const token = cookies[COOKIE_NAME];\n  return parseSession(token);\n}\n\nexport function buildSessionCookie(token: string, secure = true) {\n  const attrs = [\n    `${COOKIE_NAME}=${token}`,\n    'HttpOnly',\n    'Path=/',\n    'SameSite=None',\n    `Domain=${COOKIE_DOMAIN}`,\n    ...(secure ? ['Secure'] : []),\n    'Max-Age=604800', // 7d\n  ];\n  return attrs.join('; ');\n}\n\nexport function buildClearCookie(secure = true) {\n  const attrs = [\n    `${COOKIE_NAME}=; Path=/; Max-Age=0; HttpOnly; SameSite=None; Domain=${COOKIE_DOMAIN}${\n      secure ? '; Secure' : ''\n    }`,\n  ];\n  return attrs.join('; ');\n}\n\n", "export const ALLOWED_ORIGINS = [\n  'https://master.d2yp6hyv6u0efd.amplifyapp.com',\n  'https://myrecruiteragency.com',\n  'https://www.myrecruiteragency.com',\n  'http://localhost:3000',\n  'http://localhost:3001',\n];\n\nexport function buildCors(origin?: string) {\n  const allow = origin && ALLOWED_ORIGINS.includes(origin) ? origin : ALLOWED_ORIGINS[0];\n  return {\n    'Content-Type': 'application/json',\n    'Access-Control-Allow-Origin': allow,\n    'Access-Control-Allow-Credentials': 'true',\n    'Access-Control-Allow-Headers': 'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token',\n    'Access-Control-Allow-Methods': 'GET,POST,PUT,PATCH,DELETE,OPTIONS',\n  };\n}\n\nexport function response(statusCode: number, body: unknown, origin?: string, extraHeaders?: Record<string, string>) {\n  const cors = buildCors(origin);\n  return {\n    statusCode,\n    headers: { ...cors, ...(extraHeaders || {}) },\n    body: JSON.stringify(body),\n  };\n}\n\n"],
  "mappings": "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",
  "names": ["crypto", "import_lib_dynamodb", "SECRET"]
}
