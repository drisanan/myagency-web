{
  "version": 3,
  "sources": ["../../../../../infra/src/handlers/health.ts", "../../../../../infra/src/handlers/cors.ts"],
  "sourcesContent": ["import { APIGatewayProxyEventV2 } from 'aws-lambda';\nimport { response } from './cors';\n\nexport const handler = async (event: APIGatewayProxyEventV2) => {\n  const origin = event.headers?.origin || event.headers?.Origin || event.headers?.['origin'] || '';\n  const method = (event.requestContext.http?.method || '').toUpperCase();\n  if (method === 'OPTIONS') return response(200, { ok: true }, origin);\n  if (method && method !== 'GET') return response(405, { ok: false, error: 'Method not allowed' }, origin);\n  return response(200, { ok: true, service: 'athlete-narrative-api', status: 'healthy' }, origin);\n};\n\n", "export const ALLOWED_ORIGINS = [\n  'https://master.d2yp6hyv6u0efd.amplifyapp.com',\n  'https://myrecruiteragency.com',\n  'https://www.myrecruiteragency.com',\n  'http://localhost:3000',\n  'http://localhost:3001',\n];\n\nexport function buildCors(origin?: string) {\n  const allow = origin && ALLOWED_ORIGINS.includes(origin) ? origin : ALLOWED_ORIGINS[0];\n  return {\n    'Content-Type': 'application/json',\n    'Access-Control-Allow-Origin': allow,\n    'Access-Control-Allow-Credentials': 'true',\n    'Access-Control-Allow-Headers': 'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token',\n    'Access-Control-Allow-Methods': 'GET,POST,PUT,PATCH,DELETE,OPTIONS',\n  };\n}\n\nexport function response(statusCode: number, body: unknown, origin?: string, extraHeaders?: Record<string, string>) {\n  const cors = buildCors(origin);\n  return {\n    statusCode,\n    headers: { ...cors, ...(extraHeaders || {}) },\n    body: JSON.stringify(body),\n  };\n}\n\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;;;ACAO,IAAM,kBAAkB;AAAA,EAC7B;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF;AAEO,SAAS,UAAU,QAAiB;AACzC,QAAM,QAAQ,UAAU,gBAAgB,SAAS,MAAM,IAAI,SAAS,gBAAgB,CAAC;AACrF,SAAO;AAAA,IACL,gBAAgB;AAAA,IAChB,+BAA+B;AAAA,IAC/B,oCAAoC;AAAA,IACpC,gCAAgC;AAAA,IAChC,gCAAgC;AAAA,EAClC;AACF;AAEO,SAAS,SAAS,YAAoB,MAAe,QAAiB,cAAuC;AAClH,QAAM,OAAO,UAAU,MAAM;AAC7B,SAAO;AAAA,IACL;AAAA,IACA,SAAS,EAAE,GAAG,MAAM,GAAI,gBAAgB,CAAC,EAAG;AAAA,IAC5C,MAAM,KAAK,UAAU,IAAI;AAAA,EAC3B;AACF;;;ADvBO,IAAM,UAAU,OAAO,UAAkC;AAC9D,QAAM,SAAS,MAAM,SAAS,UAAU,MAAM,SAAS,UAAU,MAAM,UAAU,QAAQ,KAAK;AAC9F,QAAM,UAAU,MAAM,eAAe,MAAM,UAAU,IAAI,YAAY;AACrE,MAAI,WAAW,UAAW,QAAO,SAAS,KAAK,EAAE,IAAI,KAAK,GAAG,MAAM;AACnE,MAAI,UAAU,WAAW,MAAO,QAAO,SAAS,KAAK,EAAE,IAAI,OAAO,OAAO,qBAAqB,GAAG,MAAM;AACvG,SAAO,SAAS,KAAK,EAAE,IAAI,MAAM,SAAS,yBAAyB,QAAQ,UAAU,GAAG,MAAM;AAChG;",
  "names": []
}
