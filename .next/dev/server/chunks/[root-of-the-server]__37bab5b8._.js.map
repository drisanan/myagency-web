{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/mrjames/Desktop/athletenarrative/web/web-app/app/api/forms/store.ts"],"sourcesContent":["type Submission = {\n  id: string;\n  createdAt: number;\n  data: any;\n  consumed?: boolean;\n};\n\nconst SUBMISSIONS: { [agencyEmail: string]: Submission[] } = {};\nconst STORAGE_KEY = 'form_submissions_v1';\n\nfunction readStore(): { [agencyEmail: string]: Submission[] } {\n  if (typeof window === 'undefined') return SUBMISSIONS;\n  try {\n    const raw = window.localStorage.getItem(STORAGE_KEY);\n    return raw ? (JSON.parse(raw) as { [agencyEmail: string]: Submission[] }) : {};\n  } catch {\n    return {};\n  }\n}\n\nfunction writeStore(data: { [agencyEmail: string]: Submission[] }) {\n  if (typeof window === 'undefined') return;\n  try {\n    window.localStorage.setItem(STORAGE_KEY, JSON.stringify(data));\n  } catch {\n    // ignore\n  }\n}\n\n// Initialize from storage\nObject.assign(SUBMISSIONS, readStore());\n\nfunction persist() {\n  writeStore(SUBMISSIONS);\n}\n\nexport function putSubmission(agencyEmail: string, data: any): Submission {\n  const id = `${Date.now()}-${Math.random().toString(36).slice(2, 9)}`;\n  const rec: Submission = { id, createdAt: Date.now(), data, consumed: false };\n  if (!SUBMISSIONS[agencyEmail]) SUBMISSIONS[agencyEmail] = [];\n  SUBMISSIONS[agencyEmail].unshift(rec);\n  persist();\n  return rec;\n}\n\nexport function listSubmissions(agencyEmail: string, includeConsumed = false): Submission[] {\n  const all = SUBMISSIONS[agencyEmail] || [];\n  return includeConsumed ? all.slice() : all.filter((s) => !s.consumed);\n}\n\nexport function consumeSubmissions(agencyEmail: string, ids: string[]) {\n  const all = SUBMISSIONS[agencyEmail] || [];\n  const set = new Set(ids);\n  all.forEach((s) => {\n    if (set.has(s.id)) s.consumed = true;\n  });\n  persist();\n}\n\n\n"],"names":[],"mappings":";;;;;;;;AAOA,MAAM,cAAuD,CAAC;AAC9D,MAAM,cAAc;AAEpB,SAAS;IACP,wCAAmC,OAAO;;;AAO5C;AAEA,SAAS,WAAW,IAA6C;IAC/D,wCAAmC;;;AAMrC;AAEA,0BAA0B;AAC1B,OAAO,MAAM,CAAC,aAAa;AAE3B,SAAS;IACP,WAAW;AACb;AAEO,SAAS,cAAc,WAAmB,EAAE,IAAS;IAC1D,MAAM,KAAK,GAAG,KAAK,GAAG,GAAG,CAAC,EAAE,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,KAAK,CAAC,GAAG,IAAI;IACpE,MAAM,MAAkB;QAAE;QAAI,WAAW,KAAK,GAAG;QAAI;QAAM,UAAU;IAAM;IAC3E,IAAI,CAAC,WAAW,CAAC,YAAY,EAAE,WAAW,CAAC,YAAY,GAAG,EAAE;IAC5D,WAAW,CAAC,YAAY,CAAC,OAAO,CAAC;IACjC;IACA,OAAO;AACT;AAEO,SAAS,gBAAgB,WAAmB,EAAE,kBAAkB,KAAK;IAC1E,MAAM,MAAM,WAAW,CAAC,YAAY,IAAI,EAAE;IAC1C,OAAO,kBAAkB,IAAI,KAAK,KAAK,IAAI,MAAM,CAAC,CAAC,IAAM,CAAC,EAAE,QAAQ;AACtE;AAEO,SAAS,mBAAmB,WAAmB,EAAE,GAAa;IACnE,MAAM,MAAM,WAAW,CAAC,YAAY,IAAI,EAAE;IAC1C,MAAM,MAAM,IAAI,IAAI;IACpB,IAAI,OAAO,CAAC,CAAC;QACX,IAAI,IAAI,GAAG,CAAC,EAAE,EAAE,GAAG,EAAE,QAAQ,GAAG;IAClC;IACA;AACF"}},
    {"offset": {"line": 100, "column": 0}, "map": {"version":3,"sources":["file:///Users/mrjames/Desktop/athletenarrative/web/web-app/app/api/forms/submissions/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\nimport { listSubmissions } from '../store';\n\nexport async function GET(req: NextRequest) {\n  const { searchParams } = new URL(req.url);\n  const agencyEmail = (searchParams.get('agencyEmail') || '').trim();\n  if (!agencyEmail) return NextResponse.json({ ok: false, error: 'Missing agencyEmail' }, { status: 400 });\n  const items = listSubmissions(agencyEmail, false);\n  return NextResponse.json({ ok: true, items });\n}\n\n\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,IAAI,GAAgB;IACxC,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,IAAI,GAAG;IACxC,MAAM,cAAc,CAAC,aAAa,GAAG,CAAC,kBAAkB,EAAE,EAAE,IAAI;IAChE,IAAI,CAAC,aAAa,OAAO,gJAAY,CAAC,IAAI,CAAC;QAAE,IAAI;QAAO,OAAO;IAAsB,GAAG;QAAE,QAAQ;IAAI;IACtG,MAAM,QAAQ,IAAA,iJAAe,EAAC,aAAa;IAC3C,OAAO,gJAAY,CAAC,IAAI,CAAC;QAAE,IAAI;QAAM;IAAM;AAC7C"}}]
}