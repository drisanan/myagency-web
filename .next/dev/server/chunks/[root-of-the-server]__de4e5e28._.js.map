{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/mrjames/Desktop/athletenarrative/web/web-app/app/api/google/tokenStore.ts"],"sourcesContent":["export type TokenData = {\n  access_token?: string;\n  refresh_token?: string;\n  scope?: string;\n  token_type?: string;\n  expiry_date?: number;\n};\n\n// WARNING: In-memory store is only for local testing. Replace with a secure DB in production.\nconst TOKENS: Record<string, TokenData> = {};\n\nexport function saveTokens(clientId: string, tokens: TokenData) {\n  const key = clientId || 'default';\n  TOKENS[key] = { ...(TOKENS[key] || {}), ...tokens };\n}\n\nexport function getTokens(clientId: string): TokenData | undefined {\n  const key = clientId || 'default';\n  return TOKENS[key];\n}\n\nexport function clearTokens(clientId?: string) {\n  if (clientId) {\n    delete TOKENS[clientId];\n  } else {\n    Object.keys(TOKENS).forEach((k) => delete TOKENS[k]);\n  }\n}\n\n\n"],"names":[],"mappings":";;;;;;;;AAQA,8FAA8F;AAC9F,MAAM,SAAoC,CAAC;AAEpC,SAAS,WAAW,QAAgB,EAAE,MAAiB;IAC5D,MAAM,MAAM,YAAY;IACxB,MAAM,CAAC,IAAI,GAAG;QAAE,GAAI,MAAM,CAAC,IAAI,IAAI,CAAC,CAAC;QAAG,GAAG,MAAM;IAAC;AACpD;AAEO,SAAS,UAAU,QAAgB;IACxC,MAAM,MAAM,YAAY;IACxB,OAAO,MAAM,CAAC,IAAI;AACpB;AAEO,SAAS,YAAY,QAAiB;IAC3C,IAAI,UAAU;QACZ,OAAO,MAAM,CAAC,SAAS;IACzB,OAAO;QACL,OAAO,IAAI,CAAC,QAAQ,OAAO,CAAC,CAAC,IAAM,OAAO,MAAM,CAAC,EAAE;IACrD;AACF"}},
    {"offset": {"line": 78, "column": 0}, "map": {"version":3,"sources":["file:///Users/mrjames/Desktop/athletenarrative/web/web-app/app/api/google/oauth/callback/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\nimport { saveTokens } from '../../tokenStore';\n\nexport async function GET(req: NextRequest) {\n  const url = new URL(req.url);\n  const code = url.searchParams.get('code');\n  const state = url.searchParams.get('state') || '';\n  if (!code) return NextResponse.redirect(new URL('/?auth=error', req.url));\n\n  try {\n    const { google } = await import('googleapis');\n    const oAuth2Client = new google.auth.OAuth2(\n      process.env.GOOGLE_CLIENT_ID,\n      process.env.GOOGLE_CLIENT_SECRET,\n      process.env.GOOGLE_REDIRECT_URI\n    );\n    const { tokens } = await oAuth2Client.getToken(code);\n    saveTokens(state || 'default', tokens);\n    const redirect = new URL('/?auth=ok', req.url);\n    redirect.searchParams.set('clientId', state);\n    return NextResponse.redirect(redirect);\n  } catch (e) {\n    console.error('OAuth callback error', e);\n    return NextResponse.redirect(new URL('/?auth=error', req.url));\n  }\n}\n\n\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,IAAI,GAAgB;IACxC,MAAM,MAAM,IAAI,IAAI,IAAI,GAAG;IAC3B,MAAM,OAAO,IAAI,YAAY,CAAC,GAAG,CAAC;IAClC,MAAM,QAAQ,IAAI,YAAY,CAAC,GAAG,CAAC,YAAY;IAC/C,IAAI,CAAC,MAAM,OAAO,gJAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,gBAAgB,IAAI,GAAG;IAEvE,IAAI;QACF,MAAM,EAAE,MAAM,EAAE,GAAG;QACnB,MAAM,eAAe,IAAI,OAAO,IAAI,CAAC,MAAM,CACzC,QAAQ,GAAG,CAAC,gBAAgB,EAC5B,QAAQ,GAAG,CAAC,oBAAoB,EAChC,QAAQ,GAAG,CAAC,mBAAmB;QAEjC,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,aAAa,QAAQ,CAAC;QAC/C,IAAA,kJAAU,EAAC,SAAS,WAAW;QAC/B,MAAM,WAAW,IAAI,IAAI,aAAa,IAAI,GAAG;QAC7C,SAAS,YAAY,CAAC,GAAG,CAAC,YAAY;QACtC,OAAO,gJAAY,CAAC,QAAQ,CAAC;IAC/B,EAAE,OAAO,GAAG;QACV,QAAQ,KAAK,CAAC,wBAAwB;QACtC,OAAO,gJAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,gBAAgB,IAAI,GAAG;IAC9D;AACF"}}]
}