{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/mrjames/Desktop/athletenarrative/web/web-app/app/api/google/tokenStore.ts"],"sourcesContent":["export type TokenData = {\n  access_token?: string;\n  refresh_token?: string;\n  scope?: string;\n  token_type?: string;\n  expiry_date?: number;\n};\n\n// WARNING: In-memory store is only for local testing. Replace with a secure DB in production.\nconst TOKENS: Record<string, TokenData> = {};\n\nexport function saveTokens(clientId: string, tokens: TokenData) {\n  const key = clientId || 'default';\n  console.info('[gmail-token:save]', {\n    clientId: key,\n    hasAccess: Boolean(tokens?.access_token),\n    hasRefresh: Boolean(tokens?.refresh_token),\n    expiry: tokens?.expiry_date,\n  });\n  TOKENS[key] = { ...(TOKENS[key] || {}), ...tokens };\n}\n\nexport function getTokens(clientId: string): TokenData | undefined {\n  const key = clientId || 'default';\n  const t = TOKENS[key];\n  console.info('[gmail-token:get]', {\n    clientId: key,\n    exists: Boolean(t),\n    hasAccess: Boolean(t?.access_token),\n    hasRefresh: Boolean(t?.refresh_token),\n  });\n  return t;\n}\n\nexport function clearTokens(clientId?: string) {\n  if (clientId) {\n    delete TOKENS[clientId];\n  } else {\n    Object.keys(TOKENS).forEach((k) => delete TOKENS[k]);\n  }\n}\n\n\n"],"names":[],"mappings":";;;;;;;;AAQA,8FAA8F;AAC9F,MAAM,SAAoC,CAAC;AAEpC,SAAS,WAAW,QAAgB,EAAE,MAAiB;IAC5D,MAAM,MAAM,YAAY;IACxB,QAAQ,IAAI,CAAC,sBAAsB;QACjC,UAAU;QACV,WAAW,QAAQ,QAAQ;QAC3B,YAAY,QAAQ,QAAQ;QAC5B,QAAQ,QAAQ;IAClB;IACA,MAAM,CAAC,IAAI,GAAG;QAAE,GAAI,MAAM,CAAC,IAAI,IAAI,CAAC,CAAC;QAAG,GAAG,MAAM;IAAC;AACpD;AAEO,SAAS,UAAU,QAAgB;IACxC,MAAM,MAAM,YAAY;IACxB,MAAM,IAAI,MAAM,CAAC,IAAI;IACrB,QAAQ,IAAI,CAAC,qBAAqB;QAChC,UAAU;QACV,QAAQ,QAAQ;QAChB,WAAW,QAAQ,GAAG;QACtB,YAAY,QAAQ,GAAG;IACzB;IACA,OAAO;AACT;AAEO,SAAS,YAAY,QAAiB;IAC3C,IAAI,UAAU;QACZ,OAAO,MAAM,CAAC,SAAS;IACzB,OAAO;QACL,OAAO,IAAI,CAAC,QAAQ,OAAO,CAAC,CAAC,IAAM,OAAO,MAAM,CAAC,EAAE;IACrD;AACF"}},
    {"offset": {"line": 91, "column": 0}, "map": {"version":3,"sources":["file:///Users/mrjames/Desktop/athletenarrative/web/web-app/app/api/google/tokens/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\nimport { getTokens, saveTokens } from '../../google/tokenStore';\n\nexport async function GET(req: NextRequest) {\n  const { searchParams } = new URL(req.url);\n  const clientId = searchParams.get('clientId') || '';\n  const tokens = getTokens(clientId);\n  console.info('[gmail-tokens:get]', {\n    clientId,\n    exists: Boolean(tokens),\n    hasAccess: Boolean(tokens?.access_token),\n    hasRefresh: Boolean(tokens?.refresh_token),\n  });\n  return NextResponse.json({ ok: true, tokens: tokens || null });\n}\n\nexport async function POST(req: NextRequest) {\n  try {\n    const { clientId, tokens } = (await req.json()) as { clientId: string; tokens: any };\n    if (!clientId || !tokens) {\n      return NextResponse.json({ ok: false, error: 'Missing clientId or tokens' }, { status: 400 });\n    }\n    console.info('[gmail-tokens:post]', {\n      clientId,\n      hasAccess: Boolean(tokens?.access_token),\n      hasRefresh: Boolean(tokens?.refresh_token),\n      expiry: tokens?.expiry_date,\n    });\n    saveTokens(clientId, tokens);\n    return NextResponse.json({ ok: true });\n  } catch (e: any) {\n    return NextResponse.json({ ok: false, error: e?.message || 'Failed to import tokens' }, { status: 500 });\n  }\n}\n\n\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEO,eAAe,IAAI,GAAgB;IACxC,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,IAAI,GAAG;IACxC,MAAM,WAAW,aAAa,GAAG,CAAC,eAAe;IACjD,MAAM,SAAS,IAAA,iJAAS,EAAC;IACzB,QAAQ,IAAI,CAAC,sBAAsB;QACjC;QACA,QAAQ,QAAQ;QAChB,WAAW,QAAQ,QAAQ;QAC3B,YAAY,QAAQ,QAAQ;IAC9B;IACA,OAAO,gJAAY,CAAC,IAAI,CAAC;QAAE,IAAI;QAAM,QAAQ,UAAU;IAAK;AAC9D;AAEO,eAAe,KAAK,GAAgB;IACzC,IAAI;QACF,MAAM,EAAE,QAAQ,EAAE,MAAM,EAAE,GAAI,MAAM,IAAI,IAAI;QAC5C,IAAI,CAAC,YAAY,CAAC,QAAQ;YACxB,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,IAAI;gBAAO,OAAO;YAA6B,GAAG;gBAAE,QAAQ;YAAI;QAC7F;QACA,QAAQ,IAAI,CAAC,uBAAuB;YAClC;YACA,WAAW,QAAQ,QAAQ;YAC3B,YAAY,QAAQ,QAAQ;YAC5B,QAAQ,QAAQ;QAClB;QACA,IAAA,kJAAU,EAAC,UAAU;QACrB,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,IAAI;QAAK;IACtC,EAAE,OAAO,GAAQ;QACf,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,IAAI;YAAO,OAAO,GAAG,WAAW;QAA0B,GAAG;YAAE,QAAQ;QAAI;IACxG;AACF"}}]
}