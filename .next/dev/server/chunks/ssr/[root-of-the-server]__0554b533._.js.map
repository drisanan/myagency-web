{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/mrjames/Desktop/athletenarrative/web/web-app/features/auth/validators.ts"],"sourcesContent":["export function validateEmail(email: string): boolean {\n  const re = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n  return re.test(email);\n}\n\nexport function validatePassword(password: string): boolean {\n  return typeof password === 'string' && password.length >= 8;\n}\n\n\n"],"names":[],"mappings":";;;;;;AAAO,SAAS,cAAc,KAAa;IACzC,MAAM,KAAK;IACX,OAAO,GAAG,IAAI,CAAC;AACjB;AAEO,SAAS,iBAAiB,QAAgB;IAC/C,OAAO,OAAO,aAAa,YAAY,SAAS,MAAM,IAAI;AAC5D"}},
    {"offset": {"line": 21, "column": 0}, "map": {"version":3,"sources":["file:///Users/mrjames/Desktop/athletenarrative/web/web-app/features/auth/LoginForm.tsx"],"sourcesContent":["'use client';\nimport React from 'react';\nimport TextField from '@mui/material/TextField';\nimport Stack from '@mui/material/Stack';\nimport MuiButton from '@mui/material/Button';\nimport Alert from '@mui/material/Alert';\nimport AlertTitle from '@mui/material/AlertTitle';\nimport { validateEmail, validatePassword } from '@/features/auth/validators';\n\ntype Credentials = { email: string; password: string };\ntype Props = {\n  onSubmit: (creds: Credentials) => Promise<void> | void;\n};\n\nexport function LoginForm({ onSubmit }: Props) {\n  const [email, setEmail] = React.useState('');\n  const [password, setPassword] = React.useState('');\n  const [errors, setErrors] = React.useState<{ email?: string; password?: string }>({});\n  const [submitting, setSubmitting] = React.useState(false);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    const nextErrors: { email?: string; password?: string } = {};\n    if (!email) nextErrors.email = 'Required';\n    else if (!validateEmail(email)) nextErrors.email = 'Invalid email';\n    if (!password) nextErrors.password = 'Required';\n    else if (!validatePassword(password)) nextErrors.password = 'Password must be at least 8 characters';\n    setErrors(nextErrors);\n    if (Object.keys(nextErrors).length > 0) return;\n    try {\n      setSubmitting(true);\n      await onSubmit({ email, password });\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit} noValidate>\n      <Stack spacing={2} sx={{ maxWidth: 480 }}>\n        {(errors.email || errors.password) && (\n          <Alert severity=\"error\" data-testid=\"error-list\">\n            <AlertTitle>There were problems with your submission</AlertTitle>\n            <ul style={{ margin: 0, paddingInlineStart: 20 }}>\n              {errors.email && <li>Email: {errors.email}</li>}\n              {errors.password && <li>Password: {errors.password}</li>}\n            </ul>\n          </Alert>\n        )}\n        <TextField\n          label=\"Email\"\n          type=\"email\"\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n          error={Boolean(errors.email)}\n          helperText={errors.email}\n        />\n        <TextField\n          label=\"Password\"\n          type=\"password\"\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n          error={Boolean(errors.password)}\n          helperText={errors.password}\n        />\n        <MuiButton type=\"submit\" variant=\"contained\" disabled={submitting}>\n          Sign in\n        </MuiButton>\n      </Stack>\n    </form>\n  );\n}\n\n\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;;;;;;;;;AAcO,SAAS,UAAU,EAAE,QAAQ,EAAS;IAC3C,MAAM,CAAC,OAAO,SAAS,GAAG,gNAAK,CAAC,QAAQ,CAAC;IACzC,MAAM,CAAC,UAAU,YAAY,GAAG,gNAAK,CAAC,QAAQ,CAAC;IAC/C,MAAM,CAAC,QAAQ,UAAU,GAAG,gNAAK,CAAC,QAAQ,CAAwC,CAAC;IACnF,MAAM,CAAC,YAAY,cAAc,GAAG,gNAAK,CAAC,QAAQ,CAAC;IAEnD,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAChB,MAAM,aAAoD,CAAC;QAC3D,IAAI,CAAC,OAAO,WAAW,KAAK,GAAG;aAC1B,IAAI,CAAC,IAAA,+IAAa,EAAC,QAAQ,WAAW,KAAK,GAAG;QACnD,IAAI,CAAC,UAAU,WAAW,QAAQ,GAAG;aAChC,IAAI,CAAC,IAAA,kJAAgB,EAAC,WAAW,WAAW,QAAQ,GAAG;QAC5D,UAAU;QACV,IAAI,OAAO,IAAI,CAAC,YAAY,MAAM,GAAG,GAAG;QACxC,IAAI;YACF,cAAc;YACd,MAAM,SAAS;gBAAE;gBAAO;YAAS;QACnC,SAAU;YACR,cAAc;QAChB;IACF;IAEA,qBACE,8OAAC;QAAK,UAAU;QAAc,UAAU;kBACtC,cAAA,8OAAC,qKAAK;YAAC,SAAS;YAAG,IAAI;gBAAE,UAAU;YAAI;;gBACpC,CAAC,OAAO,KAAK,IAAI,OAAO,QAAQ,mBAC/B,8OAAC,qKAAK;oBAAC,UAAS;oBAAQ,eAAY;;sCAClC,8OAAC,+KAAU;sCAAC;;;;;;sCACZ,8OAAC;4BAAG,OAAO;gCAAE,QAAQ;gCAAG,oBAAoB;4BAAG;;gCAC5C,OAAO,KAAK,kBAAI,8OAAC;;wCAAG;wCAAQ,OAAO,KAAK;;;;;;;gCACxC,OAAO,QAAQ,kBAAI,8OAAC;;wCAAG;wCAAW,OAAO,QAAQ;;;;;;;;;;;;;;;;;;;8BAIxD,8OAAC,6KAAS;oBACR,OAAM;oBACN,MAAK;oBACL,OAAO;oBACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;oBACxC,OAAO,QAAQ,OAAO,KAAK;oBAC3B,YAAY,OAAO,KAAK;;;;;;8BAE1B,8OAAC,6KAAS;oBACR,OAAM;oBACN,MAAK;oBACL,OAAO;oBACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;oBAC3C,OAAO,QAAQ,OAAO,QAAQ;oBAC9B,YAAY,OAAO,QAAQ;;;;;;8BAE7B,8OAAC,uKAAS;oBAAC,MAAK;oBAAS,SAAQ;oBAAY,UAAU;8BAAY;;;;;;;;;;;;;;;;;AAM3E"}},
    {"offset": {"line": 174, "column": 0}, "map": {"version":3,"sources":["file:///Users/mrjames/Desktop/athletenarrative/web/web-app/services/agencies.ts"],"sourcesContent":["const STORAGE_KEY = 'agencies_data';\n\nfunction readStore(): Agency[] {\n  if (typeof window === 'undefined') return [];\n  const raw = window.localStorage.getItem(STORAGE_KEY);\n  if (!raw) return [];\n  try {\n    return JSON.parse(raw) as Agency[];\n  } catch {\n    return [];\n  }\n}\n\nfunction writeStore(items: Agency[]) {\n  if (typeof window === 'undefined') return;\n  window.localStorage.setItem(STORAGE_KEY, JSON.stringify(items));\n}\n\nexport type AgencySettings = {\n  primaryColor?: string;\n  secondaryColor?: string;\n  logoDataUrl?: string;\n};\nexport type Agency = {\n  id: string;\n  name: string;\n  email: string;\n  password?: string;\n  ownerFirstName?: string;\n  ownerLastName?: string;\n  ownerEmail?: string;\n  ownerPhone?: string;\n  active?: boolean;\n  settings?: AgencySettings;\n};\n\nconst SEED_AGENCIES: Agency[] = [\n  { id: 'agency-001', name: 'Prime Sports', email: 'agency1@an.test', settings: { primaryColor: '#1976d2' } },\n  { id: 'agency-002', name: 'NextGen', email: 'agency2@an.test', settings: { primaryColor: '#9c27b0' } },\n  { id: 'agency-003', name: 'Elite Edge', email: 'agency3@an.test', settings: { primaryColor: '#2e7d32' } },\n];\n\nlet AGENCIES: Agency[] = (() => {\n  const fromStore = readStore();\n  if (fromStore.length > 0) return fromStore;\n  writeStore(SEED_AGENCIES);\n  return [...SEED_AGENCIES];\n})();\n\nexport { AGENCIES };\n\nexport async function listAgencies() {\n  return AGENCIES.map(a => ({ id: a.id, name: a.name }));\n}\n\nexport async function getAgencies() {\n  return [...AGENCIES];\n}\n\nexport async function getAgencyByEmail(email: string) {\n  return AGENCIES.find(a => a.email === email) ?? null;\n}\n\nexport async function getAgencyById(id: string) {\n  return AGENCIES.find(a => a.id === id) ?? null;\n}\n\nexport async function getAgencySettings(email: string) {\n  const a = AGENCIES.find(x => x.email === email);\n  return a?.settings ?? {};\n}\n\nexport async function updateAgencySettings(email: string, settings: AgencySettings) {\n  const a = AGENCIES.find(x => x.email === email);\n  if (!a) return { ok: false };\n  a.settings = { ...(a.settings ?? {}), ...settings };\n  writeStore(AGENCIES);\n  return { ok: true, settings: a.settings };\n}\n\ntype UpsertInput = Omit<Agency, 'id'> & { id?: string };\nexport async function upsertAgency(input: UpsertInput) {\n  if (input.id) {\n    const idx = AGENCIES.findIndex(a => a.id === input.id);\n    if (idx >= 0) {\n      AGENCIES[idx] = { ...AGENCIES[idx], ...input, id: input.id };\n      writeStore(AGENCIES);\n      return { id: input.id };\n    }\n  }\n  const id = `agency-${(Math.random() * 1e6).toFixed(0)}`;\n  AGENCIES.push({\n    id,\n    name: input.name,\n    email: input.email,\n    password: input.password,\n    ownerFirstName: input.ownerFirstName,\n    ownerLastName: input.ownerLastName,\n    ownerEmail: input.ownerEmail,\n    ownerPhone: input.ownerPhone,\n    active: input.active ?? true,\n    settings: input.settings ?? {},\n  });\n  writeStore(AGENCIES);\n  return { id };\n}\n\nexport async function deleteAgency(id: string) {\n  const idx = AGENCIES.findIndex(a => a.id === id);\n  if (idx >= 0) {\n    AGENCIES.splice(idx, 1);\n    writeStore(AGENCIES);\n    return { ok: true };\n  }\n  return { ok: false };\n}\n\n\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA,MAAM,cAAc;AAEpB,SAAS;IACP,wCAAmC,OAAO,EAAE;;;IAC5C,MAAM;AAOR;AAEA,SAAS,WAAW,KAAe;IACjC,wCAAmC;;;AAErC;AAoBA,MAAM,gBAA0B;IAC9B;QAAE,IAAI;QAAc,MAAM;QAAgB,OAAO;QAAmB,UAAU;YAAE,cAAc;QAAU;IAAE;IAC1G;QAAE,IAAI;QAAc,MAAM;QAAW,OAAO;QAAmB,UAAU;YAAE,cAAc;QAAU;IAAE;IACrG;QAAE,IAAI;QAAc,MAAM;QAAc,OAAO;QAAmB,UAAU;YAAE,cAAc;QAAU;IAAE;CACzG;AAED,IAAI,WAAqB,CAAC;IACxB,MAAM,YAAY;IAClB,IAAI,UAAU,MAAM,GAAG,GAAG,OAAO;IACjC,WAAW;IACX,OAAO;WAAI;KAAc;AAC3B,CAAC;;AAIM,eAAe;IACpB,OAAO,SAAS,GAAG,CAAC,CAAA,IAAK,CAAC;YAAE,IAAI,EAAE,EAAE;YAAE,MAAM,EAAE,IAAI;QAAC,CAAC;AACtD;AAEO,eAAe;IACpB,OAAO;WAAI;KAAS;AACtB;AAEO,eAAe,iBAAiB,KAAa;IAClD,OAAO,SAAS,IAAI,CAAC,CAAA,IAAK,EAAE,KAAK,KAAK,UAAU;AAClD;AAEO,eAAe,cAAc,EAAU;IAC5C,OAAO,SAAS,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,OAAO;AAC5C;AAEO,eAAe,kBAAkB,KAAa;IACnD,MAAM,IAAI,SAAS,IAAI,CAAC,CAAA,IAAK,EAAE,KAAK,KAAK;IACzC,OAAO,GAAG,YAAY,CAAC;AACzB;AAEO,eAAe,qBAAqB,KAAa,EAAE,QAAwB;IAChF,MAAM,IAAI,SAAS,IAAI,CAAC,CAAA,IAAK,EAAE,KAAK,KAAK;IACzC,IAAI,CAAC,GAAG,OAAO;QAAE,IAAI;IAAM;IAC3B,EAAE,QAAQ,GAAG;QAAE,GAAI,EAAE,QAAQ,IAAI,CAAC,CAAC;QAAG,GAAG,QAAQ;IAAC;IAClD,WAAW;IACX,OAAO;QAAE,IAAI;QAAM,UAAU,EAAE,QAAQ;IAAC;AAC1C;AAGO,eAAe,aAAa,KAAkB;IACnD,IAAI,MAAM,EAAE,EAAE;QACZ,MAAM,MAAM,SAAS,SAAS,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,MAAM,EAAE;QACrD,IAAI,OAAO,GAAG;YACZ,QAAQ,CAAC,IAAI,GAAG;gBAAE,GAAG,QAAQ,CAAC,IAAI;gBAAE,GAAG,KAAK;gBAAE,IAAI,MAAM,EAAE;YAAC;YAC3D,WAAW;YACX,OAAO;gBAAE,IAAI,MAAM,EAAE;YAAC;QACxB;IACF;IACA,MAAM,KAAK,CAAC,OAAO,EAAE,CAAC,KAAK,MAAM,KAAK,GAAG,EAAE,OAAO,CAAC,IAAI;IACvD,SAAS,IAAI,CAAC;QACZ;QACA,MAAM,MAAM,IAAI;QAChB,OAAO,MAAM,KAAK;QAClB,UAAU,MAAM,QAAQ;QACxB,gBAAgB,MAAM,cAAc;QACpC,eAAe,MAAM,aAAa;QAClC,YAAY,MAAM,UAAU;QAC5B,YAAY,MAAM,UAAU;QAC5B,QAAQ,MAAM,MAAM,IAAI;QACxB,UAAU,MAAM,QAAQ,IAAI,CAAC;IAC/B;IACA,WAAW;IACX,OAAO;QAAE;IAAG;AACd;AAEO,eAAe,aAAa,EAAU;IAC3C,MAAM,MAAM,SAAS,SAAS,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;IAC7C,IAAI,OAAO,GAAG;QACZ,SAAS,MAAM,CAAC,KAAK;QACrB,WAAW;QACX,OAAO;YAAE,IAAI;QAAK;IACpB;IACA,OAAO;QAAE,IAAI;IAAM;AACrB"}},
    {"offset": {"line": 327, "column": 0}, "map": {"version":3,"sources":["file:///Users/mrjames/Desktop/athletenarrative/web/web-app/features/auth/service.ts"],"sourcesContent":["import { getAgencyByEmail } from '@/services/agencies';\nexport type Session = {\n  role: 'parent' | 'agency';\n  agencyId?: string;\n  email: string;\n  impersonatedBy?: { email: string; role: 'parent' };\n};\n\nexport async function login(input: { email: string; password: string }): Promise<Session> {\n  if ((input.email === 'admin' || input.email === 'admin@example.com') && input.password === 'password123') {\n    return { role: 'parent', email: 'admin' };\n  }\n  // Recognized agency emails map to agencies by email (tenancy boundary)\n  if (input.password === 'password123') {\n    const agency = await getAgencyByEmail(input.email);\n    if (agency) {\n      return { role: 'agency', email: agency.email, agencyId: agency.id };\n    }\n  }\n  // Fallback: treat as agency, default to first id for demo purposes\n  return { role: 'agency', email: input.email, agencyId: 'agency-001' };\n}\n\n\n"],"names":[],"mappings":";;;;AAAA;;AAQO,eAAe,MAAM,KAA0C;IACpE,IAAI,CAAC,MAAM,KAAK,KAAK,WAAW,MAAM,KAAK,KAAK,mBAAmB,KAAK,MAAM,QAAQ,KAAK,eAAe;QACxG,OAAO;YAAE,MAAM;YAAU,OAAO;QAAQ;IAC1C;IACA,uEAAuE;IACvE,IAAI,MAAM,QAAQ,KAAK,eAAe;QACpC,MAAM,SAAS,MAAM,IAAA,wIAAgB,EAAC,MAAM,KAAK;QACjD,IAAI,QAAQ;YACV,OAAO;gBAAE,MAAM;gBAAU,OAAO,OAAO,KAAK;gBAAE,UAAU,OAAO,EAAE;YAAC;QACpE;IACF;IACA,mEAAmE;IACnE,OAAO;QAAE,MAAM;QAAU,OAAO,MAAM,KAAK;QAAE,UAAU;IAAa;AACtE"}},
    {"offset": {"line": 380, "column": 0}, "map": {"version":3,"sources":["file:///Users/mrjames/Desktop/athletenarrative/web/web-app/features/marketing/MarketingHeader.tsx"],"sourcesContent":["'use client';\nimport React from 'react';\nimport { AppBar, Toolbar, Typography, Box, Button, Container } from '@mui/material';\nimport Link from 'next/link';\nimport Image from 'next/image';\n\nexport function MarketingHeader() {\n  return (\n    <AppBar position=\"static\" color=\"inherit\" elevation={0} className=\"marketing-header\">\n      <Container>\n        <Toolbar disableGutters>\n          <Box className=\"marketing-logo\" sx={{ flex: 1, display: 'inline-flex', alignItems: 'center', gap: 1.5 }}>\n            <Image src=\"/marketing/logo.svg\" alt=\"Athlete Narrative\" width={120} height={28} />\n            <Typography variant=\"h6\">Athlete Narrative</Typography>\n          </Box>\n          <Box>\n            <Button LinkComponent={Link} href=\"/auth/login\" color=\"inherit\">Sign in</Button>\n            <Button LinkComponent={Link} href=\"/auth/signup\" variant=\"contained\" sx={{ ml: 1 }}>Sign up</Button>\n          </Box>\n        </Toolbar>\n      </Container>\n    </AppBar>\n  );\n}\n\n\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAJA;;;;;AAMO,SAAS;IACd,qBACE,8OAAC,2MAAM;QAAC,UAAS;QAAS,OAAM;QAAU,WAAW;QAAG,WAAU;kBAChE,cAAA,8OAAC,uNAAS;sBACR,cAAA,8OAAC,+MAAO;gBAAC,cAAc;;kCACrB,8OAAC,+LAAG;wBAAC,WAAU;wBAAiB,IAAI;4BAAE,MAAM;4BAAG,SAAS;4BAAe,YAAY;4BAAU,KAAK;wBAAI;;0CACpG,8OAAC,wIAAK;gCAAC,KAAI;gCAAsB,KAAI;gCAAoB,OAAO;gCAAK,QAAQ;;;;;;0CAC7E,8OAAC,2NAAU;gCAAC,SAAQ;0CAAK;;;;;;;;;;;;kCAE3B,8OAAC,+LAAG;;0CACF,8OAAC,2MAAM;gCAAC,eAAe,uKAAI;gCAAE,MAAK;gCAAc,OAAM;0CAAU;;;;;;0CAChE,8OAAC,2MAAM;gCAAC,eAAe,uKAAI;gCAAE,MAAK;gCAAe,SAAQ;gCAAY,IAAI;oCAAE,IAAI;gCAAE;0CAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMhG"}},
    {"offset": {"line": 493, "column": 0}, "map": {"version":3,"sources":["file:///Users/mrjames/Desktop/athletenarrative/web/web-app/app/auth/login/page.tsx"],"sourcesContent":["'use client';\nimport React from 'react';\nimport { LoginForm } from '@/features/auth/LoginForm';\nimport { login } from '@/features/auth/service';\nimport { useSession } from '@/features/auth/session';\nimport { useRouter } from 'next/navigation';\nimport { Box, Container, Typography, Paper } from '@mui/material';\nimport { MarketingHeader } from '@/features/marketing/MarketingHeader';\n\nexport default function LoginPage() {\n  const { setSession } = useSession();\n  const router = useRouter();\n  const onSubmit = async (creds: { email: string; password: string }) => {\n    const s = await login(creds);\n    setSession(s);\n    router.push('/dashboard');\n  };\n  return (\n    <>\n      <MarketingHeader />\n      <Box\n        sx={{\n          minHeight: '100vh',\n          bgcolor: '#121212',\n          color: '#fff',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          py: 8,\n        }}\n      >\n        <Container maxWidth=\"sm\">\n          <Paper\n            data-testid=\"login-card\"\n            elevation={4}\n            sx={{\n              p: 4,\n              borderRadius: 2,\n              bgcolor: '#fff',\n              color: 'inherit',\n            }}\n          >\n            <Typography variant=\"h4\" gutterBottom color=\"text.primary\">\n              Sign in\n            </Typography>\n            <LoginForm onSubmit={onSubmit} />\n          </Paper>\n        </Container>\n      </Box>\n    </>\n  );\n}\n\n\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAPA;;;;;;;;AASe,SAAS;IACtB,MAAM,EAAE,UAAU,EAAE,GAAG,IAAA,0IAAU;IACjC,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,WAAW,OAAO;QACtB,MAAM,IAAI,MAAM,IAAA,oIAAK,EAAC;QACtB,WAAW;QACX,OAAO,IAAI,CAAC;IACd;IACA,qBACE;;0BACE,8OAAC,4JAAe;;;;;0BAChB,8OAAC,+LAAG;gBACF,IAAI;oBACF,WAAW;oBACX,SAAS;oBACT,OAAO;oBACP,SAAS;oBACT,YAAY;oBACZ,gBAAgB;oBAChB,IAAI;gBACN;0BAEA,cAAA,8OAAC,uNAAS;oBAAC,UAAS;8BAClB,cAAA,8OAAC,uMAAK;wBACJ,eAAY;wBACZ,WAAW;wBACX,IAAI;4BACF,GAAG;4BACH,cAAc;4BACd,SAAS;4BACT,OAAO;wBACT;;0CAEA,8OAAC,2NAAU;gCAAC,SAAQ;gCAAK,YAAY;gCAAC,OAAM;0CAAe;;;;;;0CAG3D,8OAAC,2IAAS;gCAAC,UAAU;;;;;;;;;;;;;;;;;;;;;;;;AAMjC"}}]
}