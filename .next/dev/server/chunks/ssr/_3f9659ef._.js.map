{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/mrjames/Desktop/athletenarrative/web/web-app/tenancy/themeBuilder.ts"],"sourcesContent":["import { createTheme } from '@mui/material/styles';\nimport { TenantConfig } from '@/tenancy/types';\n\nexport function createTenantTheme(tenant: TenantConfig) {\n  const theme = createTheme({\n    palette: {\n      primary: { main: tenant.brand.primary },\n      secondary: { main: tenant.brand.secondary }\n    },\n    typography: {\n      fontFamily: 'Inter, Roboto, Helvetica, Arial, sans-serif'\n    },\n    components: {\n      MuiButton: {\n        styleOverrides: {\n          root: {\n            borderRadius: 8\n          }\n        }\n      }\n    }\n  });\n  return theme;\n}\n\n\n"],"names":[],"mappings":";;;;AAAA;;AAGO,SAAS,kBAAkB,MAAoB;IACpD,MAAM,QAAQ,IAAA,0NAAW,EAAC;QACxB,SAAS;YACP,SAAS;gBAAE,MAAM,OAAO,KAAK,CAAC,OAAO;YAAC;YACtC,WAAW;gBAAE,MAAM,OAAO,KAAK,CAAC,SAAS;YAAC;QAC5C;QACA,YAAY;YACV,YAAY;QACd;QACA,YAAY;YACV,WAAW;gBACT,gBAAgB;oBACd,MAAM;wBACJ,cAAc;oBAChB;gBACF;YACF;QACF;IACF;IACA,OAAO;AACT"}},
    {"offset": {"line": 39, "column": 0}, "map": {"version":3,"sources":["file:///Users/mrjames/Desktop/athletenarrative/web/web-app/tenancy/TenantContext.tsx"],"sourcesContent":["import React from 'react';\nimport { TenantConfig } from '@/tenancy/types';\n\nconst TenantCtx = React.createContext<TenantConfig | null>(null);\n\nexport function TenantProvider({ tenant, children }: { tenant: TenantConfig; children: React.ReactNode }) {\n  return <TenantCtx.Provider value={tenant}>{children}</TenantCtx.Provider>;\n}\n\nexport function useTenant(): TenantConfig {\n  const ctx = React.useContext(TenantCtx);\n  if (!ctx) throw new Error('useTenant must be used within TenantProvider');\n  return ctx;\n}\n\n\n"],"names":[],"mappings":";;;;;;;AAAA;;;AAGA,MAAM,0BAAY,gNAAK,CAAC,aAAa,CAAsB;AAEpD,SAAS,eAAe,EAAE,MAAM,EAAE,QAAQ,EAAuD;IACtG,qBAAO,8OAAC,UAAU,QAAQ;QAAC,OAAO;kBAAS;;;;;;AAC7C;AAEO,SAAS;IACd,MAAM,MAAM,gNAAK,CAAC,UAAU,CAAC;IAC7B,IAAI,CAAC,KAAK,MAAM,IAAI,MAAM;IAC1B,OAAO;AACT"}},
    {"offset": {"line": 69, "column": 0}, "map": {"version":3,"sources":["file:///Users/mrjames/Desktop/athletenarrative/web/web-app/tenancy/TenantThemeProvider.tsx"],"sourcesContent":["import React from 'react';\nimport { ThemeProvider, CssBaseline } from '@mui/material';\nimport { createTenantTheme } from '@/tenancy/themeBuilder';\nimport { TenantConfig } from '@/tenancy/types';\nimport { TenantProvider } from '@/tenancy/TenantContext';\n\ntype Props = {\n  tenant: TenantConfig;\n  children: React.ReactNode;\n};\n\nexport function TenantThemeProvider({ tenant, children }: Props) {\n  const theme = React.useMemo(() => createTenantTheme(tenant), [tenant]);\n  return (\n    <TenantProvider tenant={tenant}>\n      <ThemeProvider theme={theme}>\n        <CssBaseline />\n        {children}\n      </ThemeProvider>\n    </TenantProvider>\n  );\n}\n\n\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAAA;AACA;AAEA;;;;;;AAOO,SAAS,oBAAoB,EAAE,MAAM,EAAE,QAAQ,EAAS;IAC7D,MAAM,QAAQ,gNAAK,CAAC,OAAO,CAAC,IAAM,IAAA,4IAAiB,EAAC,SAAS;QAAC;KAAO;IACrE,qBACE,8OAAC,2IAAc;QAAC,QAAQ;kBACtB,cAAA,8OAAC,gOAAa;YAAC,OAAO;;8BACpB,8OAAC,+NAAW;;;;;gBACX;;;;;;;;;;;;AAIT"}},
    {"offset": {"line": 115, "column": 0}, "map": {"version":3,"sources":["file:///Users/mrjames/Desktop/athletenarrative/web/web-app/config/index.ts"],"sourcesContent":["export type ServiceConfig = {\n  apiBaseUrl: string;\n};\n\nexport type TenantBrand = {\n  primary: string;\n  secondary: string;\n};\n\nexport type TenantRegistryEntry = {\n  id: string;\n  name: string;\n  brand: TenantBrand;\n  flags: Record<string, boolean>;\n  assets?: {\n    logo?: string;\n    favicon?: string;\n  };\n};\n\nexport type TenantRegistry = Record<string, TenantRegistryEntry>;\n\nlet cachedServiceConfig: ServiceConfig | null = null;\nlet cachedTenantRegistry: TenantRegistry | null = null;\n\nexport function getServiceConfig(): ServiceConfig {\n  if (cachedServiceConfig) return cachedServiceConfig;\n  // Single source of truth; override via env if needed\n  const apiBaseUrl = process.env.NEXT_PUBLIC_API_BASE_URL || 'https://api.example.com';\n  cachedServiceConfig = { apiBaseUrl };\n  return cachedServiceConfig;\n}\n\nexport function getTenantRegistry(): TenantRegistry {\n  if (cachedTenantRegistry) return cachedTenantRegistry;\n  cachedTenantRegistry = {\n    default: {\n      id: 'default',\n      name: 'AthleteNarrative',\n      brand: {\n        primary: '#1976d2',\n        secondary: '#9c27b0'\n      },\n      flags: {}\n    },\n    acme: {\n      id: 'acme',\n      name: 'Acme Athletics',\n      brand: {\n        primary: '#1976d2',\n        secondary: '#ff4081'\n      },\n      flags: {}\n    }\n  };\n  return cachedTenantRegistry;\n}\n\n\n"],"names":[],"mappings":";;;;;;AAsBA,IAAI,sBAA4C;AAChD,IAAI,uBAA8C;AAE3C,SAAS;IACd,IAAI,qBAAqB,OAAO;IAChC,qDAAqD;IACrD,MAAM,aAAa,QAAQ,GAAG,CAAC,wBAAwB,IAAI;IAC3D,sBAAsB;QAAE;IAAW;IACnC,OAAO;AACT;AAEO,SAAS;IACd,IAAI,sBAAsB,OAAO;IACjC,uBAAuB;QACrB,SAAS;YACP,IAAI;YACJ,MAAM;YACN,OAAO;gBACL,SAAS;gBACT,WAAW;YACb;YACA,OAAO,CAAC;QACV;QACA,MAAM;YACJ,IAAI;YACJ,MAAM;YACN,OAAO;gBACL,SAAS;gBACT,WAAW;YACb;YACA,OAAO,CAAC;QACV;IACF;IACA,OAAO;AACT"}},
    {"offset": {"line": 160, "column": 0}, "map": {"version":3,"sources":["file:///Users/mrjames/Desktop/athletenarrative/web/web-app/tenancy/tenantResolver.ts"],"sourcesContent":["import { getTenantRegistry } from '@/config';\n\nexport function resolveTenantFromHost(hostname: string): string {\n  // e.g., acme.example.com -> acme\n  const parts = hostname.split('.').filter(Boolean);\n  if (parts.length > 2) {\n    return parts[0];\n  }\n  // if hostname is localhost or root domain, use default\n  return 'default';\n}\n\nexport function resolveTenantFromPath(pathname: string): string {\n  // /t/<tenantId>/... -> <tenantId>\n  const parts = pathname.split('/').filter(Boolean);\n  if (parts[0] === 't' && parts[1]) {\n    return parts[1];\n  }\n  return 'default';\n}\n\nexport function ensureKnownTenant(tenantId: string): string {\n  const reg = getTenantRegistry();\n  return reg[tenantId] ? tenantId : 'default';\n}\n\n\n"],"names":[],"mappings":";;;;;;;;AAAA;;AAEO,SAAS,sBAAsB,QAAgB;IACpD,iCAAiC;IACjC,MAAM,QAAQ,SAAS,KAAK,CAAC,KAAK,MAAM,CAAC;IACzC,IAAI,MAAM,MAAM,GAAG,GAAG;QACpB,OAAO,KAAK,CAAC,EAAE;IACjB;IACA,uDAAuD;IACvD,OAAO;AACT;AAEO,SAAS,sBAAsB,QAAgB;IACpD,kCAAkC;IAClC,MAAM,QAAQ,SAAS,KAAK,CAAC,KAAK,MAAM,CAAC;IACzC,IAAI,KAAK,CAAC,EAAE,KAAK,OAAO,KAAK,CAAC,EAAE,EAAE;QAChC,OAAO,KAAK,CAAC,EAAE;IACjB;IACA,OAAO;AACT;AAEO,SAAS,kBAAkB,QAAgB;IAChD,MAAM,MAAM,IAAA,oIAAiB;IAC7B,OAAO,GAAG,CAAC,SAAS,GAAG,WAAW;AACpC"}},
    {"offset": {"line": 195, "column": 0}, "map": {"version":3,"sources":["file:///Users/mrjames/Desktop/athletenarrative/web/web-app/tenancy/serverTenant.ts"],"sourcesContent":["import { headers } from 'next/headers';\nimport { getTenantRegistry } from '@/config';\nimport { ensureKnownTenant, resolveTenantFromHost, resolveTenantFromPath } from '@/tenancy/tenantResolver';\n\nexport async function getServerTenant() {\n  const hdrs = await headers();\n  const host = hdrs.get('host') || '';\n  const path = hdrs.get('x-invoke-path') || ''; // non-standard, may be empty; fallback to default\n\n  const fromHost = ensureKnownTenant(resolveTenantFromHost(host));\n  if (fromHost !== 'default') {\n    return getTenantRegistry()[fromHost];\n  }\n  const fromPath = ensureKnownTenant(resolveTenantFromPath(path));\n  return getTenantRegistry()[fromPath];\n}\n\n\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEO,eAAe;IACpB,MAAM,OAAO,MAAM,IAAA,0IAAO;IAC1B,MAAM,OAAO,KAAK,GAAG,CAAC,WAAW;IACjC,MAAM,OAAO,KAAK,GAAG,CAAC,oBAAoB,IAAI,kDAAkD;IAEhG,MAAM,WAAW,IAAA,8IAAiB,EAAC,IAAA,kJAAqB,EAAC;IACzD,IAAI,aAAa,WAAW;QAC1B,OAAO,IAAA,oIAAiB,GAAE,CAAC,SAAS;IACtC;IACA,MAAM,WAAW,IAAA,8IAAiB,EAAC,IAAA,kJAAqB,EAAC;IACzD,OAAO,IAAA,oIAAiB,GAAE,CAAC,SAAS;AACtC"}},
    {"offset": {"line": 220, "column": 0}, "map": {"version":3,"sources":["file:///Users/mrjames/Desktop/athletenarrative/web/web-app/app/layout.tsx"],"sourcesContent":["import React from 'react';\nimport type { Metadata } from 'next';\nimport { TenantThemeProvider } from '@/tenancy/TenantThemeProvider';\nimport { getServerTenant } from '@/tenancy/serverTenant';\n\nexport const metadata: Metadata = {\n  title: 'AthleteNarrative Web',\n  description: 'Multi-tenant white-label web app'\n};\n\nexport default async function RootLayout({ children }: { children: React.ReactNode }) {\n  const tenant = await getServerTenant();\n  return (\n    <html lang=\"en\">\n      <body>\n        <TenantThemeProvider tenant={tenant}>{children}</TenantThemeProvider>\n      </body>\n    </html>\n  );\n}\n\n\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;;;;AAEO,MAAM,WAAqB;IAChC,OAAO;IACP,aAAa;AACf;AAEe,eAAe,WAAW,EAAE,QAAQ,EAAiC;IAClF,MAAM,SAAS,MAAM,IAAA,0IAAe;IACpC,qBACE,8OAAC;QAAK,MAAK;kBACT,cAAA,8OAAC;sBACC,cAAA,8OAAC,sJAAmB;gBAAC,QAAQ;0BAAS;;;;;;;;;;;;;;;;AAI9C"}}]
}