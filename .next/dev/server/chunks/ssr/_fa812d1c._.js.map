{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/mrjames/Desktop/athletenarrative/web/web-app/services/agencies.ts"],"sourcesContent":["const STORAGE_KEY = 'agencies_data';\n\nfunction readStore(): Agency[] {\n  if (typeof window === 'undefined') return [];\n  const raw = window.localStorage.getItem(STORAGE_KEY);\n  if (!raw) return [];\n  try {\n    return JSON.parse(raw) as Agency[];\n  } catch {\n    return [];\n  }\n}\n\nfunction writeStore(items: Agency[]) {\n  if (typeof window === 'undefined') return;\n  window.localStorage.setItem(STORAGE_KEY, JSON.stringify(items));\n}\n\nexport type AgencySettings = {\n  primaryColor?: string;\n  secondaryColor?: string;\n  logoDataUrl?: string;\n};\nexport type Agency = {\n  id: string;\n  name: string;\n  email: string;\n  password?: string;\n  ownerFirstName?: string;\n  ownerLastName?: string;\n  ownerEmail?: string;\n  ownerPhone?: string;\n  active?: boolean;\n  settings?: AgencySettings;\n};\n\nconst SEED_AGENCIES: Agency[] = [\n  { id: 'agency-001', name: 'Prime Sports', email: 'agency1@an.test', settings: { primaryColor: '#1976d2' } },\n  { id: 'agency-002', name: 'NextGen', email: 'agency2@an.test', settings: { primaryColor: '#9c27b0' } },\n  { id: 'agency-003', name: 'Elite Edge', email: 'agency3@an.test', settings: { primaryColor: '#2e7d32' } },\n];\n\nlet AGENCIES: Agency[] = (() => {\n  const fromStore = readStore();\n  if (fromStore.length > 0) return fromStore;\n  writeStore(SEED_AGENCIES);\n  return [...SEED_AGENCIES];\n})();\n\nexport { AGENCIES };\n\nexport async function listAgencies() {\n  return AGENCIES.map(a => ({ id: a.id, name: a.name }));\n}\n\nexport async function getAgencies() {\n  return [...AGENCIES];\n}\n\nexport async function getAgencyByEmail(email: string) {\n  return AGENCIES.find(a => a.email === email) ?? null;\n}\n\nexport async function getAgencyById(id: string) {\n  return AGENCIES.find(a => a.id === id) ?? null;\n}\n\nexport async function getAgencySettings(email: string) {\n  const a = AGENCIES.find(x => x.email === email);\n  return a?.settings ?? {};\n}\n\nexport async function updateAgencySettings(email: string, settings: AgencySettings) {\n  const a = AGENCIES.find(x => x.email === email);\n  if (!a) return { ok: false };\n  a.settings = { ...(a.settings ?? {}), ...settings };\n  writeStore(AGENCIES);\n  return { ok: true, settings: a.settings };\n}\n\ntype UpsertInput = Omit<Agency, 'id'> & { id?: string };\nexport async function upsertAgency(input: UpsertInput) {\n  if (input.id) {\n    const idx = AGENCIES.findIndex(a => a.id === input.id);\n    if (idx >= 0) {\n      AGENCIES[idx] = { ...AGENCIES[idx], ...input, id: input.id };\n      writeStore(AGENCIES);\n      return { id: input.id };\n    }\n  }\n  const id = `agency-${(Math.random() * 1e6).toFixed(0)}`;\n  AGENCIES.push({\n    id,\n    name: input.name,\n    email: input.email,\n    password: input.password,\n    ownerFirstName: input.ownerFirstName,\n    ownerLastName: input.ownerLastName,\n    ownerEmail: input.ownerEmail,\n    ownerPhone: input.ownerPhone,\n    active: input.active ?? true,\n    settings: input.settings ?? {},\n  });\n  writeStore(AGENCIES);\n  return { id };\n}\n\nexport async function deleteAgency(id: string) {\n  const idx = AGENCIES.findIndex(a => a.id === id);\n  if (idx >= 0) {\n    AGENCIES.splice(idx, 1);\n    writeStore(AGENCIES);\n    return { ok: true };\n  }\n  return { ok: false };\n}\n\n\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA,MAAM,cAAc;AAEpB,SAAS;IACP,wCAAmC,OAAO,EAAE;;;IAC5C,MAAM;AAOR;AAEA,SAAS,WAAW,KAAe;IACjC,wCAAmC;;;AAErC;AAoBA,MAAM,gBAA0B;IAC9B;QAAE,IAAI;QAAc,MAAM;QAAgB,OAAO;QAAmB,UAAU;YAAE,cAAc;QAAU;IAAE;IAC1G;QAAE,IAAI;QAAc,MAAM;QAAW,OAAO;QAAmB,UAAU;YAAE,cAAc;QAAU;IAAE;IACrG;QAAE,IAAI;QAAc,MAAM;QAAc,OAAO;QAAmB,UAAU;YAAE,cAAc;QAAU;IAAE;CACzG;AAED,IAAI,WAAqB,CAAC;IACxB,MAAM,YAAY;IAClB,IAAI,UAAU,MAAM,GAAG,GAAG,OAAO;IACjC,WAAW;IACX,OAAO;WAAI;KAAc;AAC3B,CAAC;;AAIM,eAAe;IACpB,OAAO,SAAS,GAAG,CAAC,CAAA,IAAK,CAAC;YAAE,IAAI,EAAE,EAAE;YAAE,MAAM,EAAE,IAAI;QAAC,CAAC;AACtD;AAEO,eAAe;IACpB,OAAO;WAAI;KAAS;AACtB;AAEO,eAAe,iBAAiB,KAAa;IAClD,OAAO,SAAS,IAAI,CAAC,CAAA,IAAK,EAAE,KAAK,KAAK,UAAU;AAClD;AAEO,eAAe,cAAc,EAAU;IAC5C,OAAO,SAAS,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,OAAO;AAC5C;AAEO,eAAe,kBAAkB,KAAa;IACnD,MAAM,IAAI,SAAS,IAAI,CAAC,CAAA,IAAK,EAAE,KAAK,KAAK;IACzC,OAAO,GAAG,YAAY,CAAC;AACzB;AAEO,eAAe,qBAAqB,KAAa,EAAE,QAAwB;IAChF,MAAM,IAAI,SAAS,IAAI,CAAC,CAAA,IAAK,EAAE,KAAK,KAAK;IACzC,IAAI,CAAC,GAAG,OAAO;QAAE,IAAI;IAAM;IAC3B,EAAE,QAAQ,GAAG;QAAE,GAAI,EAAE,QAAQ,IAAI,CAAC,CAAC;QAAG,GAAG,QAAQ;IAAC;IAClD,WAAW;IACX,OAAO;QAAE,IAAI;QAAM,UAAU,EAAE,QAAQ;IAAC;AAC1C;AAGO,eAAe,aAAa,KAAkB;IACnD,IAAI,MAAM,EAAE,EAAE;QACZ,MAAM,MAAM,SAAS,SAAS,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,MAAM,EAAE;QACrD,IAAI,OAAO,GAAG;YACZ,QAAQ,CAAC,IAAI,GAAG;gBAAE,GAAG,QAAQ,CAAC,IAAI;gBAAE,GAAG,KAAK;gBAAE,IAAI,MAAM,EAAE;YAAC;YAC3D,WAAW;YACX,OAAO;gBAAE,IAAI,MAAM,EAAE;YAAC;QACxB;IACF;IACA,MAAM,KAAK,CAAC,OAAO,EAAE,CAAC,KAAK,MAAM,KAAK,GAAG,EAAE,OAAO,CAAC,IAAI;IACvD,SAAS,IAAI,CAAC;QACZ;QACA,MAAM,MAAM,IAAI;QAChB,OAAO,MAAM,KAAK;QAClB,UAAU,MAAM,QAAQ;QACxB,gBAAgB,MAAM,cAAc;QACpC,eAAe,MAAM,aAAa;QAClC,YAAY,MAAM,UAAU;QAC5B,YAAY,MAAM,UAAU;QAC5B,QAAQ,MAAM,MAAM,IAAI;QACxB,UAAU,MAAM,QAAQ,IAAI,CAAC;IAC/B;IACA,WAAW;IACX,OAAO;QAAE;IAAG;AACd;AAEO,eAAe,aAAa,EAAU;IAC3C,MAAM,MAAM,SAAS,SAAS,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;IAC7C,IAAI,OAAO,GAAG;QACZ,SAAS,MAAM,CAAC,KAAK;QACrB,WAAW;QACX,OAAO;YAAE,IAAI;QAAK;IACpB;IACA,OAAO;QAAE,IAAI;IAAM;AACrB"}},
    {"offset": {"line": 157, "column": 0}, "map": {"version":3,"sources":["file:///Users/mrjames/Desktop/athletenarrative/web/web-app/services/clients.ts"],"sourcesContent":["import { getAgencyById } from '@/services/agencies';\n\ntype Client = {\n  id: string;\n  email: string;\n  firstName: string;\n  lastName: string;\n  sport: string;\n  agencyEmail: string;\n  agencyId?: string;\n  password?: string;\n  radar?: any;\n  gmailTokens?: any;\n  gmailConnected?: boolean;\n};\n\nconst STORAGE_KEY = 'clients_data';\n\nconst SEED_CLIENTS: Client[] = [\n  { id: 'ag1-c1', email: 'a1@athletes.test', firstName: 'Ava', lastName: 'Smith', sport: 'Football', agencyEmail: 'agency1@an.test' },\n  { id: 'ag1-c2', email: 'a2@athletes.test', firstName: 'Ben', lastName: 'Jones', sport: 'Basketball', agencyEmail: 'agency1@an.test' },\n  { id: 'ag2-c1', email: 'b1@athletes.test', firstName: 'Cara', lastName: 'Lee', sport: 'Baseball', agencyEmail: 'agency2@an.test' },\n  { id: 'ag3-c1', email: 'c1@athletes.test', firstName: 'Dan', lastName: 'Kim', sport: 'Soccer', agencyEmail: 'agency3@an.test' },\n];\n\nfunction readStore(): Client[] {\n  if (typeof window === 'undefined') return [...SEED_CLIENTS];\n  const raw = window.localStorage.getItem(STORAGE_KEY);\n  if (!raw) return [...SEED_CLIENTS];\n  try {\n    const parsed = JSON.parse(raw) as Client[];\n    return parsed.length ? parsed : [...SEED_CLIENTS];\n  } catch {\n    return [...SEED_CLIENTS];\n  }\n}\n\nfunction writeStore(items: Client[]) {\n  if (typeof window === 'undefined') return;\n  window.localStorage.setItem(STORAGE_KEY, JSON.stringify(items));\n}\n\nlet CLIENTS: Client[] = readStore();\n\nexport async function listClientsByAgencyEmail(agencyEmail: string) {\n  return CLIENTS.filter(c => c.agencyEmail === agencyEmail);\n}\n\nexport async function listClientsByAgency(agencyId: string) {\n  const agency = await getAgencyById(agencyId);\n  if (!agency) return [];\n  return listClientsByAgencyEmail(agency.email);\n}\nexport async function upsertClient(input: any) {\n  const id = input.id ?? `c-${(Math.random() * 1e6).toFixed(0)}`;\n  const idx = CLIENTS.findIndex(c => c.id === id);\n  const next: Client = { ...CLIENTS[idx] , ...input, id };\n  if (idx >= 0) {\n    CLIENTS[idx] = next;\n  } else {\n    CLIENTS.push(next);\n  }\n  writeStore(CLIENTS);\n  return next;\n}\nexport async function getClient(id: string) {\n  const found = CLIENTS.find(c => c.id === id);\n  return found ?? { id, email: 'athlete1@example.com', firstName: 'A1', lastName: 'L1', sport: 'Football', agencyEmail: '' };\n}\nexport async function deleteClient(id: string) {\n  const idx = CLIENTS.findIndex(c => c.id === id);\n  if (idx >= 0) {\n    CLIENTS.splice(idx, 1);\n    writeStore(CLIENTS);\n  }\n  return { ok: true };\n}\nexport async function getClients() {\n  // Determine current session from localStorage to enforce tenancy\n  const raw = typeof window !== 'undefined' ? window.localStorage.getItem('session') : null;\n  if (raw) {\n    try {\n      const s = JSON.parse(raw) as { role: 'parent' | 'agency'; email: string };\n      if (s.role === 'agency') {\n        return listClientsByAgencyEmail(s.email);\n      }\n    } catch {\n      // fall through\n    }\n  }\n  return [];\n}\n\nexport function setClientGmailTokens(clientId: string, tokens: any) {\n  const idx = CLIENTS.findIndex(c => c.id === clientId);\n  if (idx >= 0) {\n    CLIENTS[idx] = { ...CLIENTS[idx], gmailTokens: tokens, gmailConnected: true };\n    writeStore(CLIENTS);\n  }\n}\n\nexport function getClientGmailTokens(clientId: string): any | null {\n  const found = CLIENTS.find(c => c.id === clientId);\n  return found?.gmailTokens ?? null;\n}\n\n\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAA;;AAgBA,MAAM,cAAc;AAEpB,MAAM,eAAyB;IAC7B;QAAE,IAAI;QAAU,OAAO;QAAoB,WAAW;QAAO,UAAU;QAAS,OAAO;QAAY,aAAa;IAAkB;IAClI;QAAE,IAAI;QAAU,OAAO;QAAoB,WAAW;QAAO,UAAU;QAAS,OAAO;QAAc,aAAa;IAAkB;IACpI;QAAE,IAAI;QAAU,OAAO;QAAoB,WAAW;QAAQ,UAAU;QAAO,OAAO;QAAY,aAAa;IAAkB;IACjI;QAAE,IAAI;QAAU,OAAO;QAAoB,WAAW;QAAO,UAAU;QAAO,OAAO;QAAU,aAAa;IAAkB;CAC/H;AAED,SAAS;IACP,wCAAmC,OAAO;WAAI;KAAa;;;IAC3D,MAAM;AAQR;AAEA,SAAS,WAAW,KAAe;IACjC,wCAAmC;;;AAErC;AAEA,IAAI,UAAoB;AAEjB,eAAe,yBAAyB,WAAmB;IAChE,OAAO,QAAQ,MAAM,CAAC,CAAA,IAAK,EAAE,WAAW,KAAK;AAC/C;AAEO,eAAe,oBAAoB,QAAgB;IACxD,MAAM,SAAS,MAAM,IAAA,qIAAa,EAAC;IACnC,IAAI,CAAC,QAAQ,OAAO,EAAE;IACtB,OAAO,yBAAyB,OAAO,KAAK;AAC9C;AACO,eAAe,aAAa,KAAU;IAC3C,MAAM,KAAK,MAAM,EAAE,IAAI,CAAC,EAAE,EAAE,CAAC,KAAK,MAAM,KAAK,GAAG,EAAE,OAAO,CAAC,IAAI;IAC9D,MAAM,MAAM,QAAQ,SAAS,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;IAC5C,MAAM,OAAe;QAAE,GAAG,OAAO,CAAC,IAAI;QAAG,GAAG,KAAK;QAAE;IAAG;IACtD,IAAI,OAAO,GAAG;QACZ,OAAO,CAAC,IAAI,GAAG;IACjB,OAAO;QACL,QAAQ,IAAI,CAAC;IACf;IACA,WAAW;IACX,OAAO;AACT;AACO,eAAe,UAAU,EAAU;IACxC,MAAM,QAAQ,QAAQ,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;IACzC,OAAO,SAAS;QAAE;QAAI,OAAO;QAAwB,WAAW;QAAM,UAAU;QAAM,OAAO;QAAY,aAAa;IAAG;AAC3H;AACO,eAAe,aAAa,EAAU;IAC3C,MAAM,MAAM,QAAQ,SAAS,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;IAC5C,IAAI,OAAO,GAAG;QACZ,QAAQ,MAAM,CAAC,KAAK;QACpB,WAAW;IACb;IACA,OAAO;QAAE,IAAI;IAAK;AACpB;AACO,eAAe;IACpB,iEAAiE;IACjE,MAAM,MAAM,sCAAgC,0BAAyC;IACrF;;IAUA,OAAO,EAAE;AACX;AAEO,SAAS,qBAAqB,QAAgB,EAAE,MAAW;IAChE,MAAM,MAAM,QAAQ,SAAS,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;IAC5C,IAAI,OAAO,GAAG;QACZ,OAAO,CAAC,IAAI,GAAG;YAAE,GAAG,OAAO,CAAC,IAAI;YAAE,aAAa;YAAQ,gBAAgB;QAAK;QAC5E,WAAW;IACb;AACF;AAEO,SAAS,qBAAqB,QAAgB;IACnD,MAAM,QAAQ,QAAQ,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;IACzC,OAAO,OAAO,eAAe;AAC/B"}},
    {"offset": {"line": 297, "column": 0}, "map": {"version":3,"sources":["file:///Users/mrjames/Desktop/athletenarrative/web/web-app/features/clients/ClientForm.tsx"],"sourcesContent":["'use client';\nimport React from 'react';\nimport { TextField, Stack, Button, MenuItem } from '@mui/material';\nimport { z } from 'zod';\nimport { upsertClient } from '@/services/clients';\n\nconst Schema = z.object({\n  email: z.string().email(),\n  password: z.string().min(8),\n  firstName: z.string(),\n  lastName: z.string(),\n  sport: z.string(),\n});\n\nexport function ClientForm({ initial }: { initial?: any }) {\n  const [value, setValue] = React.useState(initial ?? {});\n  const onSave = async () => { Schema.parse(value); await upsertClient(value); };\n  return (\n    <Stack spacing={2} sx={{ maxWidth: 600 }}>\n      <TextField label=\"Email\" value={value.email ?? ''} onChange={e=>setValue({...value, email: e.target.value})}/>\n      <TextField label=\"Password\" type=\"password\" value={value.password ?? ''} onChange={e=>setValue({...value, password: e.target.value})}/>\n      <TextField label=\"First name\" value={value.firstName ?? ''} onChange={e=>setValue({...value, firstName: e.target.value})}/>\n      <TextField label=\"Last name\" value={value.lastName ?? ''} onChange={e=>setValue({...value, lastName: e.target.value})}/>\n      <TextField select label=\"Sport\" value={value.sport ?? ''} onChange={e=>setValue({...value, sport: e.target.value})}>\n        {['Football','Basketball','Baseball','Soccer'].map(s => <MenuItem key={s} value={s}>{s}</MenuItem>)}\n      </TextField>\n      <Button variant=\"contained\" onClick={onSave}>Save</Button>\n    </Stack>\n  );\n}\n\n\n"],"names":[],"mappings":";;;;;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAJA;;;;;;AAMA,MAAM,SAAS,kLAAC,CAAC,MAAM,CAAC;IACtB,OAAO,kLAAC,CAAC,MAAM,GAAG,KAAK;IACvB,UAAU,kLAAC,CAAC,MAAM,GAAG,GAAG,CAAC;IACzB,WAAW,kLAAC,CAAC,MAAM;IACnB,UAAU,kLAAC,CAAC,MAAM;IAClB,OAAO,kLAAC,CAAC,MAAM;AACjB;AAEO,SAAS,WAAW,EAAE,OAAO,EAAqB;IACvD,MAAM,CAAC,OAAO,SAAS,GAAG,gNAAK,CAAC,QAAQ,CAAC,WAAW,CAAC;IACrD,MAAM,SAAS;QAAc,OAAO,KAAK,CAAC;QAAQ,MAAM,IAAA,mIAAY,EAAC;IAAQ;IAC7E,qBACE,8OAAC,uMAAK;QAAC,SAAS;QAAG,IAAI;YAAE,UAAU;QAAI;;0BACrC,8OAAC,uNAAS;gBAAC,OAAM;gBAAQ,OAAO,MAAM,KAAK,IAAI;gBAAI,UAAU,CAAA,IAAG,SAAS;wBAAC,GAAG,KAAK;wBAAE,OAAO,EAAE,MAAM,CAAC,KAAK;oBAAA;;;;;;0BACzG,8OAAC,uNAAS;gBAAC,OAAM;gBAAW,MAAK;gBAAW,OAAO,MAAM,QAAQ,IAAI;gBAAI,UAAU,CAAA,IAAG,SAAS;wBAAC,GAAG,KAAK;wBAAE,UAAU,EAAE,MAAM,CAAC,KAAK;oBAAA;;;;;;0BAClI,8OAAC,uNAAS;gBAAC,OAAM;gBAAa,OAAO,MAAM,SAAS,IAAI;gBAAI,UAAU,CAAA,IAAG,SAAS;wBAAC,GAAG,KAAK;wBAAE,WAAW,EAAE,MAAM,CAAC,KAAK;oBAAA;;;;;;0BACtH,8OAAC,uNAAS;gBAAC,OAAM;gBAAY,OAAO,MAAM,QAAQ,IAAI;gBAAI,UAAU,CAAA,IAAG,SAAS;wBAAC,GAAG,KAAK;wBAAE,UAAU,EAAE,MAAM,CAAC,KAAK;oBAAA;;;;;;0BACnH,8OAAC,uNAAS;gBAAC,MAAM;gBAAC,OAAM;gBAAQ,OAAO,MAAM,KAAK,IAAI;gBAAI,UAAU,CAAA,IAAG,SAAS;wBAAC,GAAG,KAAK;wBAAE,OAAO,EAAE,MAAM,CAAC,KAAK;oBAAA;0BAC7G;oBAAC;oBAAW;oBAAa;oBAAW;iBAAS,CAAC,GAAG,CAAC,CAAA,kBAAK,8OAAC,mNAAQ;wBAAS,OAAO;kCAAI;uBAAd;;;;;;;;;;0BAEzE,8OAAC,2MAAM;gBAAC,SAAQ;gBAAY,SAAS;0BAAQ;;;;;;;;;;;;AAGnD"}},
    {"offset": {"line": 429, "column": 0}, "map": {"version":3,"sources":["file:///Users/mrjames/Desktop/athletenarrative/web/web-app/app/%28app%29/clients/%5Bid%5D/edit/page.tsx"],"sourcesContent":["'use client';\nimport React from 'react';\nimport { useQuery } from '@tanstack/react-query';\nimport { getClient } from '@/services/clients';\nimport { ClientForm } from '@/features/clients/ClientForm';\nimport { Typography } from '@mui/material';\n\nexport default function ClientEditPage({ params }: { params: { id: string } }) {\n  const q = useQuery({ queryKey: ['client', params.id], queryFn: () => getClient(params.id) });\n  if (!q.data) return null;\n  return (\n    <>\n      <Typography variant=\"h4\" gutterBottom>Edit Client</Typography>\n      <ClientForm initial={{ ...q.data, password: '' }} />\n    </>\n  );\n}\n\n\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAOe,SAAS,eAAe,EAAE,MAAM,EAA8B;IAC3E,MAAM,IAAI,IAAA,uLAAQ,EAAC;QAAE,UAAU;YAAC;YAAU,OAAO,EAAE;SAAC;QAAE,SAAS,IAAM,IAAA,gIAAS,EAAC,OAAO,EAAE;IAAE;IAC1F,IAAI,CAAC,EAAE,IAAI,EAAE,OAAO;IACpB,qBACE;;0BACE,8OAAC,2NAAU;gBAAC,SAAQ;gBAAK,YAAY;0BAAC;;;;;;0BACtC,8OAAC,gJAAU;gBAAC,SAAS;oBAAE,GAAG,EAAE,IAAI;oBAAE,UAAU;gBAAG;;;;;;;;AAGrD"}}]
}