{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/mrjames/Desktop/athletenarrative/web/web-app/theme/typography.ts"],"sourcesContent":["type TypographyOptions = {\n  fontFamily?: string;\n};\n\nexport const fontStack = [\n  'Inter',\n  '-apple-system',\n  'BlinkMacSystemFont',\n  '\"Segoe UI\"',\n  'Helvetica',\n  'Arial',\n  'sans-serif',\n  '\"Apple Color Emoji\"',\n  '\"Segoe UI Emoji\"',\n].join(',');\n\nexport const typography: TypographyOptions = {\n  fontFamily: fontStack,\n};\n\n"],"names":[],"mappings":";;;;;;AAIO,MAAM,YAAY;IACvB;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD,CAAC,IAAI,CAAC;AAEA,MAAM,aAAgC;IAC3C,YAAY;AACd"}},
    {"offset": {"line": 34, "column": 0}, "map": {"version":3,"sources":["file:///Users/mrjames/Desktop/athletenarrative/web/web-app/theme/colors.ts"],"sourcesContent":["export const colors = {\n  sidebarBg: '#14151E',\n  sidebarText: '#999DAA',\n  navActiveBg: '#AAFB00',\n  navActiveText: '#14151E',\n  actionBg: '#AAFB00',\n  actionText: '#14151E',\n};\n\nexport type ColorKeys = keyof typeof colors;\n\n"],"names":[],"mappings":";;;;AAAO,MAAM,SAAS;IACpB,WAAW;IACX,aAAa;IACb,aAAa;IACb,eAAe;IACf,UAAU;IACV,YAAY;AACd"}},
    {"offset": {"line": 50, "column": 0}, "map": {"version":3,"sources":["file:///Users/mrjames/Desktop/athletenarrative/web/web-app/tenancy/themeBuilder.ts"],"sourcesContent":["import { createTheme } from '@mui/material/styles';\nimport { TenantConfig } from '@/tenancy/types';\nimport { typography } from '@/theme/typography';\nimport { colors } from '@/theme/colors';\n\nexport function createTenantTheme(tenant: TenantConfig) {\n  const theme = createTheme({\n    palette: {\n      primary: { main: colors.actionBg, contrastText: colors.actionText },\n      secondary: { main: tenant.brand.secondary || '#5D4AFB' }\n    },\n    typography,\n    components: {\n      MuiButton: {\n        styleOverrides: {\n          root: {\n            borderRadius: 8\n          },\n          containedPrimary: {\n            backgroundColor: colors.actionBg,\n            color: colors.actionText,\n            '&:hover': { backgroundColor: '#99e600' }\n          },\n          outlinedPrimary: {\n            borderColor: colors.actionBg,\n            color: colors.actionText,\n            '&:hover': { borderColor: '#99e600', backgroundColor: 'rgba(170,251,0,0.08)' }\n          },\n          textPrimary: {\n            color: colors.actionText\n          }\n        }\n      },\n      MuiTabs: {\n        styleOverrides: {\n          indicator: {\n            backgroundColor: colors.actionBg\n          }\n        }\n      },\n      MuiTab: {\n        styleOverrides: {\n          root: {\n            '&.Mui-selected': { color: colors.actionText }\n          }\n        }\n      },\n      MuiListItemButton: {\n        styleOverrides: {\n          root: {\n            '&.Mui-selected': { backgroundColor: 'rgba(170,251,0,0.12)', color: colors.actionText }\n          }\n        }\n      },\n      MuiOutlinedInput: {\n        styleOverrides: {\n          root: {\n            fontFamily: 'Inter, -apple-system, BlinkMacSystemFont, \"Segoe UI\", Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\"',\n            fontWeight: 400,\n            fontSize: '1rem',\n            lineHeight: '1.4375em',\n            boxSizing: 'border-box',\n            display: 'inline-flex',\n            alignItems: 'center',\n            borderRadius: 8,\n            minHeight: 40,\n            paddingBlock: 0,\n            paddingInline: 12,\n            boxShadow: '0px 1px 2px rgba(0, 0, 0, 0.08)',\n          },\n          input: {\n            padding: 0,\n          },\n          notchedOutline: {\n            borderWidth: 1,\n          },\n        },\n      },\n      MuiInputBase: {\n        styleOverrides: {\n          root: {\n            fontFamily: 'Inter, -apple-system, BlinkMacSystemFont, \"Segoe UI\", Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\"',\n            fontWeight: 400,\n            fontSize: '1rem',\n            lineHeight: '1.4375em',\n          },\n          input: {\n            padding: 0,\n          },\n        },\n      }\n    }\n  });\n  return theme;\n}\n\n\n"],"names":[],"mappings":";;;;AAAA;AAEA;AACA;;;;AAEO,SAAS,kBAAkB,MAAoB;IACpD,MAAM,QAAQ,IAAA,0NAAW,EAAC;QACxB,SAAS;YACP,SAAS;gBAAE,MAAM,yHAAM,CAAC,QAAQ;gBAAE,cAAc,yHAAM,CAAC,UAAU;YAAC;YAClE,WAAW;gBAAE,MAAM,OAAO,KAAK,CAAC,SAAS,IAAI;YAAU;QACzD;QACA,YAAA,iIAAU;QACV,YAAY;YACV,WAAW;gBACT,gBAAgB;oBACd,MAAM;wBACJ,cAAc;oBAChB;oBACA,kBAAkB;wBAChB,iBAAiB,yHAAM,CAAC,QAAQ;wBAChC,OAAO,yHAAM,CAAC,UAAU;wBACxB,WAAW;4BAAE,iBAAiB;wBAAU;oBAC1C;oBACA,iBAAiB;wBACf,aAAa,yHAAM,CAAC,QAAQ;wBAC5B,OAAO,yHAAM,CAAC,UAAU;wBACxB,WAAW;4BAAE,aAAa;4BAAW,iBAAiB;wBAAuB;oBAC/E;oBACA,aAAa;wBACX,OAAO,yHAAM,CAAC,UAAU;oBAC1B;gBACF;YACF;YACA,SAAS;gBACP,gBAAgB;oBACd,WAAW;wBACT,iBAAiB,yHAAM,CAAC,QAAQ;oBAClC;gBACF;YACF;YACA,QAAQ;gBACN,gBAAgB;oBACd,MAAM;wBACJ,kBAAkB;4BAAE,OAAO,yHAAM,CAAC,UAAU;wBAAC;oBAC/C;gBACF;YACF;YACA,mBAAmB;gBACjB,gBAAgB;oBACd,MAAM;wBACJ,kBAAkB;4BAAE,iBAAiB;4BAAwB,OAAO,yHAAM,CAAC,UAAU;wBAAC;oBACxF;gBACF;YACF;YACA,kBAAkB;gBAChB,gBAAgB;oBACd,MAAM;wBACJ,YAAY;wBACZ,YAAY;wBACZ,UAAU;wBACV,YAAY;wBACZ,WAAW;wBACX,SAAS;wBACT,YAAY;wBACZ,cAAc;wBACd,WAAW;wBACX,cAAc;wBACd,eAAe;wBACf,WAAW;oBACb;oBACA,OAAO;wBACL,SAAS;oBACX;oBACA,gBAAgB;wBACd,aAAa;oBACf;gBACF;YACF;YACA,cAAc;gBACZ,gBAAgB;oBACd,MAAM;wBACJ,YAAY;wBACZ,YAAY;wBACZ,UAAU;wBACV,YAAY;oBACd;oBACA,OAAO;wBACL,SAAS;oBACX;gBACF;YACF;QACF;IACF;IACA,OAAO;AACT"}},
    {"offset": {"line": 169, "column": 0}, "map": {"version":3,"sources":["file:///Users/mrjames/Desktop/athletenarrative/web/web-app/tenancy/TenantContext.tsx"],"sourcesContent":["'use client';\nimport React from 'react';\nimport { TenantConfig } from '@/tenancy/types';\n\nconst TenantCtx = React.createContext<TenantConfig | null>(null);\n\nexport function TenantProvider({ tenant, children }: { tenant: TenantConfig; children: React.ReactNode }) {\n  return <TenantCtx.Provider value={tenant}>{children}</TenantCtx.Provider>;\n}\n\nexport function useTenant(): TenantConfig {\n  const ctx = React.useContext(TenantCtx);\n  if (!ctx) throw new Error('useTenant must be used within TenantProvider');\n  return ctx;\n}\n\n\n"],"names":[],"mappings":";;;;;;;AACA;AADA;;;AAIA,MAAM,0BAAY,gNAAK,CAAC,aAAa,CAAsB;AAEpD,SAAS,eAAe,EAAE,MAAM,EAAE,QAAQ,EAAuD;IACtG,qBAAO,8OAAC,UAAU,QAAQ;QAAC,OAAO;kBAAS;;;;;;AAC7C;AAEO,SAAS;IACd,MAAM,MAAM,gNAAK,CAAC,UAAU,CAAC;IAC7B,IAAI,CAAC,KAAK,MAAM,IAAI,MAAM;IAC1B,OAAO;AACT"}},
    {"offset": {"line": 200, "column": 0}, "map": {"version":3,"sources":["file:///Users/mrjames/Desktop/athletenarrative/web/web-app/tenancy/TenantThemeProvider.tsx"],"sourcesContent":["'use client';\nimport React from 'react';\nimport { ThemeProvider, CssBaseline } from '@mui/material';\nimport { createTenantTheme } from '@/tenancy/themeBuilder';\nimport { TenantConfig } from '@/tenancy/types';\nimport { TenantProvider } from '@/tenancy/TenantContext';\n\ntype Props = {\n  tenant: TenantConfig;\n  children: React.ReactNode;\n};\n\nexport function TenantThemeProvider({ tenant, children }: Props) {\n  const theme = React.useMemo(() => createTenantTheme(tenant), [tenant]);\n  return (\n    <TenantProvider tenant={tenant}>\n      <ThemeProvider theme={theme}>\n        <CssBaseline />\n        {children}\n      </ThemeProvider>\n    </TenantProvider>\n  );\n}\n\n\n"],"names":[],"mappings":";;;;;AACA;AACA;AAAA;AACA;AAEA;AALA;;;;;;AAYO,SAAS,oBAAoB,EAAE,MAAM,EAAE,QAAQ,EAAS;IAC7D,MAAM,QAAQ,gNAAK,CAAC,OAAO,CAAC,IAAM,IAAA,4IAAiB,EAAC,SAAS;QAAC;KAAO;IACrE,qBACE,8OAAC,2IAAc;QAAC,QAAQ;kBACtB,cAAA,8OAAC,gOAAa;YAAC,OAAO;;8BACpB,8OAAC,+NAAW;;;;;gBACX;;;;;;;;;;;;AAIT"}},
    {"offset": {"line": 247, "column": 0}, "map": {"version":3,"sources":["file:///Users/mrjames/Desktop/athletenarrative/web/web-app/services/agencies.ts"],"sourcesContent":["const API_BASE_URL = process.env.NEXT_PUBLIC_API_BASE_URL || process.env.API_BASE_URL;\n\nfunction requireApiBase() {\n  if (!API_BASE_URL) throw new Error('API_BASE_URL is not configured');\n  return API_BASE_URL;\n}\n\nasync function apiFetch(path: string, init?: RequestInit) {\n  const base = requireApiBase();\n  if (typeof fetch === 'undefined') return null;\n  const headers: Record<string, string> = { 'Content-Type': 'application/json', ...(init?.headers as any) };\n  const res = await fetch(`${base}${path}`, { ...init, headers });\n  if (!res.ok) {\n    const text = await res.text();\n    throw new Error(`API ${path} failed: ${res.status} ${text}`);\n  }\n  return res.json();\n}\n\nexport type AgencySettings = {\n  primaryColor?: string;\n  secondaryColor?: string;\n  logoDataUrl?: string;\n};\nexport type Agency = {\n  id: string;\n  name: string;\n  email: string;\n  password?: string;\n  ownerFirstName?: string;\n  ownerLastName?: string;\n  ownerEmail?: string;\n  ownerPhone?: string;\n  active?: boolean;\n  settings?: AgencySettings;\n};\n\nconst SEED_AGENCIES: Agency[] = [\n  { id: 'agency-001', name: 'Prime Sports', email: 'agency1@an.test', settings: { primaryColor: '#1976d2' } },\n  { id: 'agency-002', name: 'NextGen', email: 'agency2@an.test', settings: { primaryColor: '#9c27b0' } },\n  { id: 'agency-003', name: 'Elite Edge', email: 'agency3@an.test', settings: { primaryColor: '#2e7d32' } },\n];\n\nexport async function listAgencies() {\n  if (API_BASE_URL) {\n    const data = await apiFetch('/agencies');\n    return data?.agencies ?? [];\n  }\n  return [];\n}\n\nexport async function getAgencies() {\n  if (API_BASE_URL) {\n    const data = await apiFetch('/agencies');\n    return data?.agencies ?? [];\n  }\n  return [];\n}\n\nexport async function getAgencyByEmail(email: string) {\n  if (API_BASE_URL) {\n    const data = await apiFetch('/agencies');\n    const list = data?.agencies ?? [];\n    return list.find((a: Agency) => a.email === email) ?? null;\n  }\n  return null;\n}\n\nexport async function getAgencyById(id: string) {\n  if (API_BASE_URL) {\n    const data = await apiFetch('/agencies');\n    const list = data?.agencies ?? [];\n    return list.find((a: Agency) => a.id === id) ?? null;\n  }\n  return null;\n}\n\nexport async function getAgencySettings(email: string) {\n  if (API_BASE_URL) {\n    const data = await apiFetch(`/agencies?email=${encodeURIComponent(email)}`);\n    const list = data?.agencies ?? [];\n    const a = list.find((x: Agency) => x.email === email);\n    return a?.settings ?? {};\n  }\n  return {};\n}\n\nexport async function updateAgencySettings(email: string, settings: AgencySettings) {\n  if (API_BASE_URL) {\n    const data = await apiFetch('/agencies/settings', { method: 'PUT', body: JSON.stringify({ email, settings }) });\n    return data;\n  }\n  return { ok: false };\n}\n\ntype UpsertInput = Omit<Agency, 'id'> & { id?: string };\nexport async function upsertAgency(input: UpsertInput) {\n  if (API_BASE_URL) {\n    const data = await apiFetch('/agencies', { method: 'POST', body: JSON.stringify(input) });\n    return data;\n  }\n  return { id: undefined };\n}\n\nexport async function createAgencyFromGHL(input: { name?: string; email: string; color?: string; logoUrl?: string }) {\n  if (!API_BASE_URL) throw new Error('API_BASE_URL is not configured');\n  const payload: UpsertInput = {\n    name: input.name || 'New Agency',\n    email: input.email,\n    settings: {\n      primaryColor: input.color,\n      logoDataUrl: input.logoUrl,\n    },\n  };\n  const res = await apiFetch('/agencies', { method: 'POST', body: JSON.stringify(payload) });\n  const id = res?.id || res?.agency?.id;\n  return { id, ...payload };\n}\n\nexport async function deleteAgency(id: string) {\n  if (API_BASE_URL) {\n    const data = await apiFetch(`/agencies/${id}`, { method: 'DELETE' });\n    return data ?? { ok: true };\n  }\n  return { ok: false };\n}\n\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 422, "column": 0}, "map": {"version":3,"sources":["file:///Users/mrjames/Desktop/athletenarrative/web/web-app/services/authGHL.ts"],"sourcesContent":["'use client';\n\nexport type GHLLoginResult =\n  | {\n      ok: true;\n      contact: { id: string; email: string; firstName?: string; lastName?: string; phone?: string; accessCode: string };\n      agency?: { id?: string; name?: string; color?: string; logoUrl?: string; isNew?: boolean };\n    }\n  | { ok: false; error: string };\n\nexport async function loginWithGHL(apiBase: string, email: string, phone: string, accessCodeInput: string): Promise<GHLLoginResult> {\n  if (!apiBase) throw new Error('API_BASE_URL is not configured');\n  try {\n    const endpoint = `${apiBase}/auth/login`;\n    const res = await fetch(endpoint, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      credentials: 'include',\n      body: JSON.stringify({ email, phone, accessCode: accessCodeInput }),\n    });\n    const data = await res.json();\n    if (!res.ok || !data?.ok) {\n      return { ok: false, error: data?.error || 'Login failed' };\n    }\n    return { ok: true, contact: data.contact, agency: data.agency };\n  } catch (e: any) {\n    return { ok: false, error: e?.message || 'Login failed' };\n  }\n}\n\n"],"names":[],"mappings":";;;;AAAA;AAUO,eAAe,aAAa,OAAe,EAAE,KAAa,EAAE,KAAa,EAAE,eAAuB;IACvG,IAAI,CAAC,SAAS,MAAM,IAAI,MAAM;IAC9B,IAAI;QACF,MAAM,WAAW,GAAG,QAAQ,WAAW,CAAC;QACxC,MAAM,MAAM,MAAM,MAAM,UAAU;YAChC,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;YAC9C,aAAa;YACb,MAAM,KAAK,SAAS,CAAC;gBAAE;gBAAO;gBAAO,YAAY;YAAgB;QACnE;QACA,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,MAAM,IAAI;YACxB,OAAO;gBAAE,IAAI;gBAAO,OAAO,MAAM,SAAS;YAAe;QAC3D;QACA,OAAO;YAAE,IAAI;YAAM,SAAS,KAAK,OAAO;YAAE,QAAQ,KAAK,MAAM;QAAC;IAChE,EAAE,OAAO,GAAQ;QACf,OAAO;YAAE,IAAI;YAAO,OAAO,GAAG,WAAW;QAAe;IAC1D;AACF"}},
    {"offset": {"line": 466, "column": 0}, "map": {"version":3,"sources":["file:///Users/mrjames/Desktop/athletenarrative/web/web-app/features/auth/service.ts"],"sourcesContent":["import { getAgencyByEmail } from '@/services/agencies';\nimport { createAgencyFromGHL } from '@/services/agencies';\nimport { loginWithGHL } from '@/services/authGHL';\n\nconst NEXT_PUBLIC_API_BASE_URL='https://iakaowunc5.execute-api.us-west-1.amazonaws.com'\nconst API_BASE_URL = NEXT_PUBLIC_API_BASE_URL;\n\nfunction requireApiBase() {\n  if (!API_BASE_URL) throw new Error('API_BASE_URL is not configured');\n  return API_BASE_URL;\n}\n\nexport type Session = {\n  role: 'parent' | 'agency';\n  agencyId?: string;\n  email: string;\n  agencyLogo?: string;\n  impersonatedBy?: { email: string; role: 'parent' };\n  contactId?: string;\n};\n\nasync function postSession(session: Session) {\n  const base = requireApiBase();\n  if (typeof fetch === 'undefined') return null;\n  const res = await fetch(`${base}/auth/session`, {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    credentials: 'include',\n    body: JSON.stringify({\n      agencyId: session.agencyId,\n      email: session.email,\n      role: session.role,\n      userId: session.contactId,\n    }),\n  });\n  if (!res.ok) {\n    const txt = await res.text();\n    throw new Error(`auth session failed: ${res.status} ${txt}`);\n  }\n  return res.json();\n}\n\nexport async function fetchSession(): Promise<Session | null> {\n  const base = requireApiBase();\n  if (typeof fetch === 'undefined') return null;\n  try {\n    const res = await fetch(`${base}/auth/session`, { method: 'GET', credentials: 'include' });\n    if (!res.ok) return null;\n    const data = await res.json();\n    return data?.session ?? null;\n  } catch {\n    return null;\n  }\n}\n\nexport async function login(input: { email: string; phone: string; accessCode: string }): Promise<Session> {\n  const base = requireApiBase();\n  const result = await loginWithGHL(base, input.email.trim(), input.phone.trim(), input.accessCode.trim());\n  if (!result.ok) {\n    throw new Error(result.error);\n  }\n  console.log('result', JSON.stringify(result, null, 2));\n  let agencyId = result.agency?.id;\n  let agencyName = result.agency?.name;\n  let agencyColor = result.agency?.color;\n  let agencyLogo = result.agency?.logoUrl;\nconsole.log('agencyId', agencyId);\nconsole.log('agencyName', agencyName);\nconsole.log('agencyColor', agencyColor);\nconsole.log('agencyLogo', agencyLogo);\n  if (agencyId === 'READY') {\n    console.log('Creating new agency from GHL metadata');\n    // Create new agency instance using GHL metadata\n    const created = await createAgencyFromGHL({\n      name: agencyName,\n      email: result.contact.email,\n      color: agencyColor,\n      logoUrl: agencyLogo,\n    });\n    agencyId = created.id;\n  }\n  console.log('agencyId', agencyId);\n  if (!agencyId) {\n    const agency = await getAgencyByEmail(result.contact.email);\n    agencyId = agency?.id;\n  }\n\n  // Final fallback: use contact email as agencyId to avoid missing field on session\n  agencyId = agencyId || result.contact.email;\nconsole.log('agencyId', agencyId);\n  console.log('result.contact.email', result.contact.email);\n  const session: Session = {\n    role: 'agency',\n    email: result.contact.email,\n    agencyId,\n    contactId: result.contact.id,\n  };\n  // Issue session cookie via API if available\n  await postSession(session).catch(() => null);\n  return session;\n}\n\n\n"],"names":[],"mappings":";;;;;;AAAA;AAEA;;;;AAEA,MAAM,2BAAyB;AAC/B,MAAM,eAAe;AAErB,SAAS;IACP;;IACA,OAAO;AACT;AAWA,eAAe,YAAY,OAAgB;IACzC,MAAM,OAAO;IACb,IAAI,OAAO,UAAU,aAAa,OAAO;IACzC,MAAM,MAAM,MAAM,MAAM,GAAG,KAAK,aAAa,CAAC,EAAE;QAC9C,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,aAAa;QACb,MAAM,KAAK,SAAS,CAAC;YACnB,UAAU,QAAQ,QAAQ;YAC1B,OAAO,QAAQ,KAAK;YACpB,MAAM,QAAQ,IAAI;YAClB,QAAQ,QAAQ,SAAS;QAC3B;IACF;IACA,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,MAAM,MAAM,MAAM,IAAI,IAAI;QAC1B,MAAM,IAAI,MAAM,CAAC,qBAAqB,EAAE,IAAI,MAAM,CAAC,CAAC,EAAE,KAAK;IAC7D;IACA,OAAO,IAAI,IAAI;AACjB;AAEO,eAAe;IACpB,MAAM,OAAO;IACb,IAAI,OAAO,UAAU,aAAa,OAAO;IACzC,IAAI;QACF,MAAM,MAAM,MAAM,MAAM,GAAG,KAAK,aAAa,CAAC,EAAE;YAAE,QAAQ;YAAO,aAAa;QAAU;QACxF,IAAI,CAAC,IAAI,EAAE,EAAE,OAAO;QACpB,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,OAAO,MAAM,WAAW;IAC1B,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAEO,eAAe,MAAM,KAA2D;IACrF,MAAM,OAAO;IACb,MAAM,SAAS,MAAM,IAAA,mIAAY,EAAC,MAAM,MAAM,KAAK,CAAC,IAAI,IAAI,MAAM,KAAK,CAAC,IAAI,IAAI,MAAM,UAAU,CAAC,IAAI;IACrG,IAAI,CAAC,OAAO,EAAE,EAAE;QACd,MAAM,IAAI,MAAM,OAAO,KAAK;IAC9B;IACA,QAAQ,GAAG,CAAC,UAAU,KAAK,SAAS,CAAC,QAAQ,MAAM;IACnD,IAAI,WAAW,OAAO,MAAM,EAAE;IAC9B,IAAI,aAAa,OAAO,MAAM,EAAE;IAChC,IAAI,cAAc,OAAO,MAAM,EAAE;IACjC,IAAI,aAAa,OAAO,MAAM,EAAE;IAClC,QAAQ,GAAG,CAAC,YAAY;IACxB,QAAQ,GAAG,CAAC,cAAc;IAC1B,QAAQ,GAAG,CAAC,eAAe;IAC3B,QAAQ,GAAG,CAAC,cAAc;IACxB,IAAI,aAAa,SAAS;QACxB,QAAQ,GAAG,CAAC;QACZ,gDAAgD;QAChD,MAAM,UAAU,MAAM,IAAA,2IAAmB,EAAC;YACxC,MAAM;YACN,OAAO,OAAO,OAAO,CAAC,KAAK;YAC3B,OAAO;YACP,SAAS;QACX;QACA,WAAW,QAAQ,EAAE;IACvB;IACA,QAAQ,GAAG,CAAC,YAAY;IACxB,IAAI,CAAC,UAAU;QACb,MAAM,SAAS,MAAM,IAAA,wIAAgB,EAAC,OAAO,OAAO,CAAC,KAAK;QAC1D,WAAW,QAAQ;IACrB;IAEA,kFAAkF;IAClF,WAAW,YAAY,OAAO,OAAO,CAAC,KAAK;IAC7C,QAAQ,GAAG,CAAC,YAAY;IACtB,QAAQ,GAAG,CAAC,wBAAwB,OAAO,OAAO,CAAC,KAAK;IACxD,MAAM,UAAmB;QACvB,MAAM;QACN,OAAO,OAAO,OAAO,CAAC,KAAK;QAC3B;QACA,WAAW,OAAO,OAAO,CAAC,EAAE;IAC9B;IACA,4CAA4C;IAC5C,MAAM,YAAY,SAAS,KAAK,CAAC,IAAM;IACvC,OAAO;AACT"}},
    {"offset": {"line": 570, "column": 0}, "map": {"version":3,"sources":["file:///Users/mrjames/Desktop/athletenarrative/web/web-app/features/auth/session.tsx"],"sourcesContent":["'use client';\nimport React from 'react';\nimport type { Session } from '@/features/auth/service';\nimport { fetchSession } from '@/features/auth/service';\n\ntype Ctx = { session: Session | null; setSession: (s: Session | null) => void; loading: boolean };\nconst SessionCtx = React.createContext<Ctx | null>(null);\n\nexport function SessionProvider({ children }: { children: React.ReactNode }) {\n  const [session, setSession] = React.useState<Session | null>(null);\n  const [loading, setLoading] = React.useState(true);\n\n  React.useEffect(() => {\n    let mounted = true;\n    (async () => {\n      const apiSession = await fetchSession();\n      if (!mounted) return;\n      setSession(apiSession);\n      setLoading(false);\n    })();\n    return () => {\n      mounted = false;\n    };\n  }, []);\n\n  const set = React.useCallback((s: Session | null) => {\n    setSession(s);\n  }, []);\n\n  return <SessionCtx.Provider value={{ session, setSession: set, loading }}>{children}</SessionCtx.Provider>;\n}\n\nexport function useSession() {\n  const ctx = React.useContext(SessionCtx);\n  if (!ctx) throw new Error('useSession must be used within SessionProvider');\n  return ctx;\n}\n"],"names":[],"mappings":";;;;;;;AACA;AAEA;AAHA;;;;AAMA,MAAM,2BAAa,gNAAK,CAAC,aAAa,CAAa;AAE5C,SAAS,gBAAgB,EAAE,QAAQ,EAAiC;IACzE,MAAM,CAAC,SAAS,WAAW,GAAG,gNAAK,CAAC,QAAQ,CAAiB;IAC7D,MAAM,CAAC,SAAS,WAAW,GAAG,gNAAK,CAAC,QAAQ,CAAC;IAE7C,gNAAK,CAAC,SAAS,CAAC;QACd,IAAI,UAAU;QACd,CAAC;YACC,MAAM,aAAa,MAAM,IAAA,2IAAY;YACrC,IAAI,CAAC,SAAS;YACd,WAAW;YACX,WAAW;QACb,CAAC;QACD,OAAO;YACL,UAAU;QACZ;IACF,GAAG,EAAE;IAEL,MAAM,MAAM,gNAAK,CAAC,WAAW,CAAC,CAAC;QAC7B,WAAW;IACb,GAAG,EAAE;IAEL,qBAAO,8OAAC,WAAW,QAAQ;QAAC,OAAO;YAAE;YAAS,YAAY;YAAK;QAAQ;kBAAI;;;;;;AAC7E;AAEO,SAAS;IACd,MAAM,MAAM,gNAAK,CAAC,UAAU,CAAC;IAC7B,IAAI,CAAC,KAAK,MAAM,IAAI,MAAM;IAC1B,OAAO;AACT"}},
    {"offset": {"line": 624, "column": 0}, "map": {"version":3,"sources":["file:///Users/mrjames/Desktop/athletenarrative/web/web-app/app/providers.tsx"],"sourcesContent":["'use client';\nimport React from 'react';\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\nimport { SessionProvider } from '@/features/auth/session';\n\nexport function Providers({ children }: { children: React.ReactNode }) {\n  const [client] = React.useState(() => new QueryClient());\n  return (\n    <QueryClientProvider client={client}>\n      <SessionProvider>{children}</SessionProvider>\n    </QueryClientProvider>\n  );\n}\n\n\n"],"names":[],"mappings":";;;;;AACA;AACA;AAAA;AACA;AAHA;;;;;AAKO,SAAS,UAAU,EAAE,QAAQ,EAAiC;IACnE,MAAM,CAAC,OAAO,GAAG,gNAAK,CAAC,QAAQ,CAAC,IAAM,IAAI,4LAAW;IACrD,qBACE,8OAAC,6MAAmB;QAAC,QAAQ;kBAC3B,cAAA,8OAAC,+IAAe;sBAAE;;;;;;;;;;;AAGxB"}}]
}