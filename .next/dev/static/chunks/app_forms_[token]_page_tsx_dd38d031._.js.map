{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/mrjames/Desktop/athletenarrative/web/web-app/app/forms/%5Btoken%5D/page.tsx"],"sourcesContent":["'use client';\nimport React from 'react';\nimport { Box, TextField, Button, Typography, Paper } from '@mui/material';\nimport { ThemeProvider, createTheme } from '@mui/material/styles';\n\nexport default function IntakeFormPage({ params }: { params: { token: string } }) {\n  const rawToken = params.token;\n  const decodedToken = React.useMemo(() => {\n    try { return decodeURIComponent(rawToken); } catch { return rawToken; }\n  }, [rawToken]);\n  const [agency, setAgency] = React.useState<{ name?: string; email?: string; settings?: { primaryColor?: string; secondaryColor?: string; logoDataUrl?: string } }>({});\n  const [form, setForm] = React.useState<any>({\n    email: '',\n    password: '',\n    firstName: '',\n    lastName: '',\n    sport: '',\n    division: '',\n    graduationYear: '',\n    radar: {\n      preferredPosition: '',\n      school: '',\n      gpa: '',\n      youtubeHighlightUrl: '',\n      hudlLink: '',\n      instagramProfileUrl: '',\n      athleteMetricsTitleOne: '',\n      athleteMetricsValueOne: '',\n    },\n  });\n  const [status, setStatus] = React.useState<string>('');\n\n  React.useEffect(() => {\n    (async () => {\n      try {\n        const res = await fetch(`/api/forms/agency?token=${encodeURIComponent(decodedToken)}`);\n        const data = await res.json();\n        if (data?.ok) setAgency(data.agency || {});\n      } catch {}\n    })();\n  }, [decodedToken]);\n\n  async function submit() {\n    try {\n      setStatus('Submittingâ€¦');\n      const res = await fetch('/api/forms/submit', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ token: decodedToken, form }),\n      });\n      const data = await res.json();\n      if (!res.ok || !data?.ok) throw new Error(data?.error || 'Submit failed');\n      setStatus('Submitted! You may close this page.');\n    } catch (e: any) {\n      setStatus(e?.message || 'Submit failed');\n    }\n  }\n\n  const theme = React.useMemo(() => {\n    const primary = agency?.settings?.primaryColor || '#1976d2';\n    const secondary = agency?.settings?.secondaryColor || '#9c27b0';\n    return createTheme({\n      palette: {\n        primary: { main: primary },\n        secondary: { main: secondary },\n      },\n    });\n  }, [agency?.settings?.primaryColor, agency?.settings?.secondaryColor]);\n\n  return (\n    <ThemeProvider theme={theme}>\n      <Box sx={{ maxWidth: 720, m: '40px auto' }}>\n        <Paper sx={{ p: 3 }}>\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 2, mb: 2 }}>\n            {agency?.settings?.logoDataUrl ? (\n              <img src={agency.settings.logoDataUrl} alt=\"Agency Logo\" style={{ height: 48, objectFit: 'contain' }} />\n            ) : null}\n            <Typography variant=\"h5\" gutterBottom sx={{ m: 0 }}>{agency?.name || 'Athlete Intake'}</Typography>\n          </Box>\n          <Box sx={{ display: 'grid', gridTemplateColumns: { xs: '1fr', md: '1fr 1fr' }, gap: 2, mb: 2 }}>\n          <TextField label=\"Email\" value={form.email} onChange={(e)=>setForm({...form, email: e.target.value})} />\n          <TextField label=\"Password\" type=\"password\" value={form.password} onChange={(e)=>setForm({...form, password: e.target.value})} />\n          <TextField label=\"First name\" value={form.firstName} onChange={(e)=>setForm({...form, firstName: e.target.value})} />\n          <TextField label=\"Last name\" value={form.lastName} onChange={(e)=>setForm({...form, lastName: e.target.value})} />\n          <TextField label=\"Sport\" value={form.sport} onChange={(e)=>setForm({...form, sport: e.target.value})} />\n          <TextField label=\"Division\" value={form.division} onChange={(e)=>setForm({...form, division: e.target.value})} />\n          <TextField label=\"Graduation Year\" value={form.graduationYear} onChange={(e)=>setForm({...form, graduationYear: e.target.value})} />\n          <TextField label=\"Preferred Position\" value={form.radar.preferredPosition} onChange={(e)=>setForm({...form, radar: { ...form.radar, preferredPosition: e.target.value }})} />\n          <TextField label=\"School\" value={form.radar.school} onChange={(e)=>setForm({...form, radar: { ...form.radar, school: e.target.value }})} />\n          <TextField label=\"GPA\" value={form.radar.gpa} onChange={(e)=>setForm({...form, radar: { ...form.radar, gpa: e.target.value }})} />\n          <TextField label=\"YouTube\" value={form.radar.youtubeHighlightUrl} onChange={(e)=>setForm({...form, radar: { ...form.radar, youtubeHighlightUrl: e.target.value }})} />\n          <TextField label=\"Hudl\" value={form.radar.hudlLink} onChange={(e)=>setForm({...form, radar: { ...form.radar, hudlLink: e.target.value }})} />\n          <TextField label=\"Instagram\" value={form.radar.instagramProfileUrl} onChange={(e)=>setForm({...form, radar: { ...form.radar, instagramProfileUrl: e.target.value }})} />\n          <TextField label=\"Metric 1 Title\" value={form.radar.athleteMetricsTitleOne} onChange={(e)=>setForm({...form, radar: { ...form.radar, athleteMetricsTitleOne: e.target.value }})} />\n          <TextField label=\"Metric 1 Value\" value={form.radar.athleteMetricsValueOne} onChange={(e)=>setForm({...form, radar: { ...form.radar, athleteMetricsValueOne: e.target.value }})} />\n          </Box>\n          <Box sx={{ display: 'flex', gap: 2, alignItems: 'center' }}>\n            <Button variant=\"contained\" onClick={submit}>Submit</Button>\n            <Typography variant=\"body2\" color=\"text.secondary\">{status}</Typography>\n          </Box>\n        </Paper>\n      </Box>\n    </ThemeProvider>\n  );\n}\n\n"],"names":[],"mappings":"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"}}]
}