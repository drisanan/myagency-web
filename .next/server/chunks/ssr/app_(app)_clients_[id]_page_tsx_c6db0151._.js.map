{"version":3,"sources":["../../../../app/%28app%29/clients/%5Bid%5D/page.tsx","../../../../features/notes/NotesPanel.tsx","../../../../features/notes/useNotes.ts"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport {\n  Avatar,\n  Box,\n  Button,\n  Card,\n  CardContent,\n  Chip,\n  Collapse,\n  Divider,\n  List,\n  ListItem,\n  ListItemText,\n  Menu,\n  MenuItem,\n  Stack,\n  Tab,\n  Tabs,\n  Typography,\n} from '@mui/material';\nimport { IoChevronDownOutline } from 'react-icons/io5';\nimport { useParams, useRouter } from 'next/navigation';\nimport { getClient } from '@/services/clients';\nimport { getMailEntries } from '@/services/mailStatus';\nimport { NotesPanel } from '@/features/notes/NotesPanel';\nimport { TasksPanel } from '@/features/tasks/TasksPanel';\nimport { useSearchParams } from 'next/navigation';\n\ntype MailEntry = ReturnType<typeof getMailEntries>[number] & {\n  id?: string;\n  to?: string;\n  recipientFirstName?: string;\n  recipientLastName?: string;\n  university?: string;\n  position?: string;\n  subject?: string;\n  body?: string;\n  html?: string;\n  sentAt?: number;\n  date?: number;\n};\n\nexport default function ClientProfilePage() {\n  const params = useParams();\n  const searchParams = useSearchParams();\n  const router = useRouter();\n  const id = Array.isArray(params?.id) ? params?.id[0] : (params?.id as string | undefined);\n\n  const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);\n  const [tab, setTab] = React.useState(0);\n  const [expandedId, setExpandedId] = React.useState<string | null>(null);\n  const [client, setClient] = React.useState<any | null>(null);\n\n  React.useEffect(() => {\n    let mounted = true;\n    (async () => {\n      if (!id) return;\n      const c = await getClient(id);\n      if (mounted) setClient(c);\n    })();\n    return () => {\n      mounted = false;\n    };\n  }, [id]);\n\n  const mails: MailEntry[] = React.useMemo(() => {\n    if (!client?.id) return [];\n    return (getMailEntries() as MailEntry[]).filter((m) => m.clientId === client.id);\n  }, [client?.id]);\n\n  React.useEffect(() => {\n    const t = searchParams?.get('tab');\n    if (t === 'notes') setTab(1);\n  }, [searchParams]);\n\n  if (!client) {\n    return (\n      <Box sx={{ p: 3 }}>\n        <Typography variant=\"h6\">Athlete not found</Typography>\n      </Box>\n    );\n  }\n\n  const name = `${client.firstName ?? ''} ${client.lastName ?? ''}`.trim() || 'Unknown Athlete';\n  const formatSport = (raw?: string) => {\n    if (!raw) return 'Unknown sport';\n    // Insert space before capital letters for camel-cased sports like MensSwimming -> Mens Swimming\n    return raw.replace(/([a-z])([A-Z])/g, '$1 $2');\n  };\n  const sport = formatSport(client.sport);\n  const photo = client.photoUrl || client.profileImageUrl || '/marketing/an-logo.png';\n\n  const handleMenuOpen = (e: React.MouseEvent<HTMLElement>) => setAnchorEl(e.currentTarget);\n  const handleMenuClose = () => setAnchorEl(null);\n\n  return (\n    <Box sx={{ p: 3, bgcolor: '#fff', borderRadius: 2 }}>\n      <Stack direction=\"row\" alignItems=\"center\" spacing={2} sx={{ mb: 2 }}>\n        <Avatar src={photo} alt={name} sx={{ width: 56, height: 56 }} />\n        <Box sx={{ flex: 1, minWidth: 0 }}>\n          <Typography variant=\"h6\" noWrap>{name}</Typography>\n          <Typography variant=\"body2\" color=\"text.secondary\" noWrap>{sport}</Typography>\n        </Box>\n        <Button\n          variant=\"outlined\"\n          endIcon={<IoChevronDownOutline />}\n          onClick={handleMenuOpen}\n        >\n          Actions\n        </Button>\n        <Menu anchorEl={anchorEl} open={Boolean(anchorEl)} onClose={handleMenuClose}>\n          <MenuItem onClick={() => { handleMenuClose(); router.push(`/clients/${client.id}/edit`); }}>Edit</MenuItem>\n          <MenuItem\n            onClick={() => { handleMenuClose(); router.push(`/clients/${client.id}/delete`); }}\n            sx={{ color: '#f04438' }}\n          >\n            Delete account\n          </MenuItem>\n        </Menu>\n      </Stack>\n\n      <Divider sx={{ mb: 2 }} />\n\n      <Tabs value={tab} onChange={(_, v) => setTab(v)} sx={{ mb: 1 }}>\n        <Tab label=\"Emails\" />\n        <Tab label=\"Notes\" data-testid=\"notes-tab\" />\n        <Tab label=\"Tasks\" data-testid=\"tasks-tab\" />\n      </Tabs>\n\n      {tab === 0 && (\n        <Card variant=\"outlined\" sx={{ borderRadius: 2 }}>\n          <CardContent sx={{ p: 0 }}>\n            <Box sx={{ px: 2, pt: 2, pb: 1, display: 'flex', alignItems: 'center', gap: 2 }}>\n              <Chip label=\"Sent\" color=\"primary\" variant=\"outlined\" />\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                {mails.length} sent\n              </Typography>\n            </Box>\n            <Divider />\n            <List disablePadding>\n              {mails.map((m) => {\n                const key = m.id || `${m.email || m.to || ''}-${m.subject || ''}-${(m as any).mailedAt || m.sentAt || m.date || ''}`;\n                const isOpen = expandedId === key;\n                const sent = m.sentAt || m.date || (m as any).mailedAt || Date.now();\n                return (\n                  <React.Fragment key={key}>\n                    <ListItem\n                      secondaryAction={\n                        <Stack alignItems=\"flex-end\" spacing={0.5}>\n                          <Typography variant=\"body2\" color=\"text.secondary\">\n                            {new Date(sent).toLocaleDateString()} {new Date(sent).toLocaleTimeString()}\n                          </Typography>\n                          <Button size=\"small\" onClick={() => setExpandedId(isOpen ? null : key)}>\n                            {isOpen ? 'Hide' : 'View'}\n                          </Button>\n                        </Stack>\n                      }\n                    >\n                      <ListItemText\n                        primary={\n                          <Stack direction=\"row\" spacing={1} alignItems=\"center\" flexWrap=\"wrap\">\n                            <Typography variant=\"subtitle2\">\n                              {(m.recipientFirstName || 'First') + ' ' + (m.recipientLastName || 'Last')}\n                            </Typography>\n                            <Typography variant=\"body2\" color=\"text.secondary\">\n                              • {m.university || 'University'}\n                            </Typography>\n                            <Typography variant=\"body2\" color=\"text.secondary\">\n                              • {m.position || 'Position'}\n                            </Typography>\n                          </Stack>\n                        }\n                        secondary={\n                          <Typography variant=\"body2\" color=\"text.secondary\" noWrap>\n                            {m.subject || '(No subject)'}\n                          </Typography>\n                        }\n                      />\n                    </ListItem>\n                    <Collapse in={isOpen} timeout=\"auto\" unmountOnExit>\n                      <Box sx={{ px: 3, pb: 2 }}>\n                        <Typography variant=\"body2\" color=\"text.primary\" sx={{ whiteSpace: 'pre-wrap' }}>\n                          {m.body || m.html || '(No content)'}\n                        </Typography>\n                      </Box>\n                    </Collapse>\n                    <Divider />\n                  </React.Fragment>\n                );\n              })}\n              {mails.length === 0 && (\n                <Box sx={{ px: 3, py: 4 }}>\n                  <Typography variant=\"body2\" color=\"text.secondary\">\n                    No sent emails yet.\n                  </Typography>\n                </Box>\n              )}\n            </List>\n          </CardContent>\n        </Card>\n      )}\n      {tab === 1 && (\n        <Box sx={{ mt: 2 }}>\n          <NotesPanel athleteId={client.id} />\n        </Box>\n      )}\n      {tab === 2 && (\n        <Box sx={{ mt: 2 }}>\n          <TasksPanel athleteId={client.id} />\n        </Box>\n      )}\n    </Box>\n  );\n}\n","'use client';\nimport React from 'react';\nimport {\n  Box,\n  Button,\n  Chip,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  IconButton,\n  MenuItem,\n  Stack,\n  TextField,\n  Typography,\n  Paper,\n} from '@mui/material';\nimport { FaRegStickyNote, FaTrash, FaEdit } from 'react-icons/fa';\nimport { useNotes } from './useNotes';\nimport { useSession } from '@/features/auth/session';\n\ntype Note = ReturnType<typeof useNotes>['notes'][number];\n\nexport function NotesPanel({ athleteId }: { athleteId: string }) {\n  const { session } = useSession();\n  const agencyEmail = session?.email || '';\n  const { notes, query, createNote, updateNote, deleteNote, creating, updating, deleting } = useNotes(athleteId, agencyEmail);\n\n  const [open, setOpen] = React.useState(false);\n  const [editing, setEditing] = React.useState<Note | null>(null);\n  const [form, setForm] = React.useState<{ title?: string; body: string; type?: string }>({ body: '', type: 'other' });\n  const [error, setError] = React.useState('');\n\n  const resetForm = () => {\n    setForm({ title: '', body: '', type: 'other' });\n    setEditing(null);\n    setError('');\n  };\n\n  const startAdd = () => {\n    resetForm();\n    setOpen(true);\n  };\n  const startEdit = (note: Note) => {\n    setEditing(note);\n    setForm({ title: note.title || '', body: note.body || '', type: note.type || 'other' });\n    setError('');\n    setOpen(true);\n  };\n\n  const handleSave = async () => {\n    if (!form.body?.trim()) {\n      setError('Body is required');\n      return;\n    }\n    try {\n      if (editing) {\n        await updateNote({ id: editing.id, title: form.title, body: form.body, type: form.type as any });\n      } else {\n        await createNote({ title: form.title, body: form.body, type: form.type as any, author: session?.email });\n      }\n      setOpen(false);\n      resetForm();\n    } catch (e: any) {\n      setError(e?.message || 'Failed to save');\n    }\n  };\n\n  const handleDelete = async (id: string) => {\n    await deleteNote(id);\n  };\n\n  return (\n    <Box>\n      <Stack direction=\"row\" alignItems=\"center\" justifyContent=\"space-between\" sx={{ mb: 2 }}>\n        <Typography variant=\"h6\">Notes</Typography>\n        <Button variant=\"contained\" onClick={startAdd} data-testid=\"note-add\" startIcon={<FaRegStickyNote />}>\n          Add note\n        </Button>\n      </Stack>\n\n      {query.isLoading ? (\n        <Typography>Loading...</Typography>\n      ) : notes.length === 0 ? (\n        <Typography color=\"text.secondary\">No notes yet.</Typography>\n      ) : (\n        <Stack spacing={1.5}>\n          {notes.map((n) => (\n            <Paper\n              key={n.id}\n              variant=\"outlined\"\n              sx={{ p: 1.5, display: 'flex', gap: 1, alignItems: 'flex-start' }}\n              data-testid=\"note-item\"\n            >\n              <Stack spacing={1} sx={{ flex: 1, minWidth: 0 }}>\n                <Stack direction=\"row\" alignItems=\"center\" spacing={1} sx={{ flexWrap: 'wrap' }}>\n                  <Chip size=\"small\" label={n.type || 'other'} />\n                  <Typography variant=\"body2\" color=\"text.secondary\">\n                    {new Date(n.createdAt).toLocaleString()}\n                  </Typography>\n                  {n.title ? (\n                    <Typography variant=\"subtitle2\" sx={{ fontWeight: 700, ml: 0.5 }} noWrap>\n                      {n.title}\n                    </Typography>\n                  ) : null}\n                </Stack>\n                <Typography variant=\"body2\" sx={{ whiteSpace: 'pre-wrap' }}>\n                  {n.body}\n                </Typography>\n              </Stack>\n              <Stack direction=\"row\" spacing={1}>\n                <IconButton aria-label=\"Edit note\" onClick={() => startEdit(n)} data-testid=\"note-edit\">\n                  <FaEdit />\n                </IconButton>\n                <IconButton aria-label=\"Delete note\" onClick={() => handleDelete(n.id)} data-testid=\"note-delete\">\n                  <FaTrash />\n                </IconButton>\n              </Stack>\n            </Paper>\n          ))}\n        </Stack>\n      )}\n\n      <Dialog\n        open={open}\n        onClose={() => setOpen(false)}\n        fullWidth\n        maxWidth=\"xs\"\n        PaperProps={{\n          sx: { minWidth: { xs: '80vw', md: '50vw' }, minHeight: { xs: '20vh', md: '22vh' } },\n        }}\n      >\n        <DialogTitle\n          sx={{\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'space-between',\n            gap: 1,\n          }}\n        >\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 1.5 }}>\n            <Box\n              component=\"img\"\n              src=\"/marketing/an-logo.png\"\n              alt=\"Logo\"\n              sx={{ width: 32, height: 32, objectFit: 'contain' }}\n            />\n            <Typography variant=\"h6\">{editing ? 'Edit note' : 'Add note'}</Typography>\n          </Box>\n          <IconButton aria-label=\"Close\" onClick={() => setOpen(false)}>\n            ×\n          </IconButton>\n        </DialogTitle>\n        <DialogContent sx={{ display: 'flex', flexDirection: 'column', gap: 2, mt: 1 }}>\n          <TextField\n            label=\"Subject\"\n            value={form.title || ''}\n            onChange={(e) => setForm((p) => ({ ...p, title: e.target.value }))}\n            data-testid=\"note-title\"\n          />\n          <TextField\n            label=\"Type\"\n            select\n            value={form.type || 'other'}\n            onChange={(e) => setForm((p) => ({ ...p, type: e.target.value }))}\n            data-testid=\"note-type\"\n          >\n            {['recruiting', 'account', 'advice', 'event', 'other'].map((t) => (\n              <MenuItem key={t} value={t}>\n                {t}\n              </MenuItem>\n            ))}\n          </TextField>\n          <TextField\n            label=\"Note\"\n            multiline\n            minRows={3}\n            value={form.body}\n            onChange={(e) => setForm((p) => ({ ...p, body: e.target.value }))}\n            error={Boolean(error)}\n            helperText={error}\n            data-testid=\"note-body\"\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setOpen(false)}>Cancel</Button>\n          <Button\n            variant=\"contained\"\n            onClick={handleSave}\n            disabled={creating || updating}\n            data-testid=\"note-save\"\n          >\n            {editing ? 'Save changes' : 'Add note'}\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </Box>\n  );\n}\n\n\n","import { useMutation, useQuery, useQueryClient } from '@tanstack/react-query';\n\ntype Note = {\n  id: string;\n  athleteId: string;\n  agencyEmail: string;\n  author?: string;\n  title?: string;\n  body: string;\n  type?: 'call' | 'coach' | 'dm' | 'event' | 'other';\n  createdAt: number;\n  updatedAt: number;\n};\n\nasync function fetchNotes(athleteId: string, agencyEmail: string) {\n  const res = await fetch(`/api/notes?athleteId=${encodeURIComponent(athleteId)}&agencyEmail=${encodeURIComponent(agencyEmail)}`);\n  if (!res.ok) throw new Error('Failed to load notes');\n  const data = await res.json();\n  return (data?.data as Note[]).sort((a, b) => b.createdAt - a.createdAt);\n}\n\nasync function createNoteReq(input: Partial<Note> & { athleteId: string; agencyEmail: string; body: string }) {\n  const res = await fetch('/api/notes', {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json', 'x-agency-email': input.agencyEmail },\n    body: JSON.stringify(input),\n  });\n  if (!res.ok) throw new Error('Failed to create note');\n  const data = await res.json();\n  return data?.data as Note;\n}\n\nasync function updateNoteReq(id: string, patch: Partial<Note>, agencyEmail: string) {\n  const res = await fetch('/api/notes', {\n    method: 'PATCH',\n    headers: { 'Content-Type': 'application/json', 'x-agency-email': agencyEmail },\n    body: JSON.stringify({ id, ...patch, agencyEmail }),\n  });\n  if (!res.ok) throw new Error('Failed to update note');\n  const data = await res.json();\n  return data?.data as Note;\n}\n\nasync function deleteNoteReq(id: string, agencyEmail: string) {\n  const res = await fetch('/api/notes', {\n    method: 'DELETE',\n    headers: { 'Content-Type': 'application/json', 'x-agency-email': agencyEmail },\n    body: JSON.stringify({ id, agencyEmail }),\n  });\n  if (!res.ok) throw new Error('Failed to delete note');\n  return true;\n}\n\nexport function useNotes(athleteId: string, agencyEmail: string) {\n  const qc = useQueryClient();\n  const queryKey = ['notes', athleteId, agencyEmail];\n  const query = useQuery({\n    queryKey,\n    queryFn: () => fetchNotes(athleteId, agencyEmail),\n    enabled: Boolean(athleteId && agencyEmail),\n  });\n\n  const createMut = useMutation({\n    mutationFn: (input: { title?: string; body: string; type?: Note['type']; author?: string }) =>\n      createNoteReq({ ...input, athleteId, agencyEmail, body: input.body }),\n    onSuccess: () => qc.invalidateQueries({ queryKey }),\n  });\n\n  const updateMut = useMutation({\n    mutationFn: (input: { id: string; title?: string; body?: string; type?: Note['type'] }) =>\n      updateNoteReq(input.id, input, agencyEmail),\n    onSuccess: () => qc.invalidateQueries({ queryKey }),\n  });\n\n  const deleteMut = useMutation({\n    mutationFn: (id: string) => deleteNoteReq(id, agencyEmail),\n    onSuccess: () => qc.invalidateQueries({ queryKey }),\n  });\n\n  return {\n    query,\n    notes: query.data ?? [],\n    createNote: createMut.mutateAsync,\n    updateNote: updateMut.mutateAsync,\n    deleteNote: deleteMut.mutateAsync,\n    creating: createMut.status === 'pending',\n    updating: updateMut.status === 'pending',\n    deleting: deleteMut.status === 'pending',\n  };\n}\n\n\n"],"names":[],"mappings":"wDAEA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,sBAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,wBAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,uCAAA,EAAA,EAAA,CAAA,CAAA,OAmBA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OCvBA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,MAeA,EAAA,EAAA,CAAA,CAAA,OCjBA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OAcA,eAAe,EAAW,CAAiB,CAAE,CAAmB,EAC9D,IAAM,EAAM,MAAM,MAAM,CAAC,qBAAqB,EAAE,mBAAmB,GAAW,aAAa,EAAE,mBAAmB,GAAA,CAAc,EAC9H,GAAI,CAAC,EAAI,EAAE,CAAE,MAAM,AAAI,MAAM,wBAC7B,IAAM,EAAO,MAAM,EAAI,IAAI,GAC3B,MAAO,CAAC,GAAM,IAAA,CAAc,CAAE,IAAI,CAAC,CAAC,EAAG,IAAM,EAAE,SAAS,CAAG,EAAE,SAAS,CACxE,CAEA,eAAe,EAAc,CAA+E,EAC1G,IAAM,EAAM,MAAM,MAAM,aAAc,CACpC,OAAQ,OACR,QAAS,CAAE,eAAgB,mBAAoB,iBAAkB,EAAM,WAAY,AAAD,EAClF,KAAM,KAAK,SAAS,CAAC,EACvB,GACA,GAAI,CAAC,EAAI,EAAE,CAAE,MAAM,AAAI,MAAM,yBAC7B,IAAM,EAAO,MAAM,EAAI,IAAI,GAC3B,OAAO,GAAM,IACf,CAEA,eAAe,EAAc,CAAU,CAAE,CAAoB,CAAE,CAAmB,EAChF,IAAM,EAAM,MAAM,MAAM,aAAc,CACpC,OAAQ,QACR,QAAS,CAAE,eAAgB,mBAAoB,iBAAkB,CAAY,EAC7E,KAAM,KAAK,SAAS,CAAC,IAAE,EAAI,GAAG,CAAK,aAAE,CAAY,EACnD,GACA,GAAI,CAAC,EAAI,EAAE,CAAE,MAAM,AAAI,MAAM,yBAC7B,IAAM,EAAO,MAAM,EAAI,IAAI,GAC3B,OAAO,GAAM,IACf,CAEA,eAAe,EAAc,CAAU,CAAE,CAAmB,EAM1D,GAAI,CAAC,CALO,MAAM,MAAM,aAAc,CACpC,OAAQ,SACR,QAAS,CAAE,eAAgB,mBAAoB,iBAAkB,CAAY,EAC7E,KAAM,KAAK,SAAS,CAAC,IAAE,cAAI,CAAY,EACzC,EAAA,EACS,EAAE,CAAE,MAAM,AAAI,MAAM,yBAC7B,OAAO,CACT,CDhCA,IAAA,EAAA,EAAA,CAAA,CAAA,OAIO,SAAS,EAAW,WAAE,CAAS,CAAyB,EAC7D,YC4CM,EAMA,EDlDA,SAAE,CAAO,CAAE,CAAG,CAAA,EAAA,EAAA,UAAA,AAAU,IACxB,EAAc,GAAS,OAAS,GAChC,OAAE,CAAK,OAAE,CAAK,YAAE,CAAU,YAAE,CAAU,YAAE,CAAU,UAAE,CAAQ,UAAE,CAAQ,UAAE,CAAQ,CAAE,EC4BlF,CD5BqF,CC4BhF,CAAA,EAAA,EAAA,cAAA,AAAc,IACnB,EAAW,CAAC,YAAgC,CAC5C,EAAQ,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,UACrB,EACA,QAAS,IAAM,OACf,IAD0B,KACjB,EAAQ,GDjC4F,CCgCxE,AACP,CAChC,GAEM,EAAY,CAAA,EAHc,AAGd,EAAA,WAAA,AAAW,EAAC,CAC5B,WAAY,AAAC,GACX,EAAc,CAAE,GAAG,CAAK,CAAE,UDtCsE,ECsC3D,cAAa,KAAM,EAAM,IAAI,AAAC,GACrE,UAAW,IAAM,EAAG,iBAAiB,CAAC,UAAE,CAAS,EACnD,KAEkB,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,CAC5B,WAAa,AAAD,GACV,EAAc,EAAM,EAAE,CAAE,KAC1B,EADiC,QACtB,IAAM,EAAG,iBAAiB,CAAC,UAAE,CAAS,EACnD,KAEkB,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,CAC5B,WAAY,AAAC,GAAe,EAAc,IAAI,CAC9C,UAAW,IAAM,EAAG,iBAAiB,CAAC,UAAE,CAAS,EACnD,GAEO,OACL,EACA,MAAO,EAAM,IAAI,EAAI,EAAE,CACvB,WAAY,EAAU,WAAW,CACjC,WAAY,EAAU,WAAW,CACjC,WAAY,EAAU,WAAW,CACjC,SAA+B,YAArB,EAAU,MAAM,CAC1B,SAA+B,YAArB,EAAU,MAAM,CAC1B,SAA+B,AAArB,cAAU,MAAM,AAC5B,GD5DM,CAAC,EAAM,EAAQ,CAAG,EAAA,OAAK,CAAC,QAAQ,EAAC,GACjC,CAAC,EAAS,EAAW,CAAG,EAAA,OAAK,CAAC,QAAQ,CAAc,MACpD,CAAC,EAAM,EAAQ,CAAG,EAAA,OAAK,CAAC,QAAQ,CAAkD,CAAE,KAAM,GAAI,KAAM,OAAQ,GAC5G,CAAC,EAAO,EAAS,CAAG,EAAA,OAAK,CAAC,QAAQ,CAAC,IAEnC,EAAY,KAChB,EAAQ,CAAE,MAAO,GAAI,KAAM,GAAI,KAAM,OAAQ,GAC7C,EAAW,MACX,EAAS,GACX,EAaM,EAAa,UACjB,GAAI,CAAC,EAAK,IAAI,EAAE,OAAQ,YACtB,EAAS,oBAGX,GAAI,CACE,EACF,MAAM,CADK,CACM,CAAE,GAAI,EAAQ,EAAE,CAAE,MAAO,EAAK,KAAK,CAAE,KAAM,EAAK,IAAI,CAAE,KAAM,EAAK,IAAI,AAAQ,GAE9F,MAAM,EAAW,CAAE,MAAO,EAAK,KAAK,CAAE,KAAM,EAAK,IAAI,CAAE,KAAM,EAAK,IAAI,CAAS,OAAQ,GAAS,KAAM,GAExG,GAAQ,GACR,GACF,CAAE,MAAO,EAAQ,CACf,EAAS,GAAG,SAAW,iBACzB,CACF,EAEM,EAAe,MAAO,IAC1B,MAAM,EAAW,EACnB,EAEA,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,GAAG,CAAA,WACF,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAU,MAAM,WAAW,SAAS,eAAe,gBAAgB,GAAI,CAAE,GAAI,CAAE,YACpF,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,QAAQ,cAAK,UACzB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,YAAY,QArCjB,CAqC0B,IApCzC,IACA,EAAQ,GACV,EAkCqD,cAAY,WAAW,UAAW,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,eAAe,CAAA,CAAA,YAAK,gBAKvG,EAAM,SAAS,CACd,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,UAAC,eACV,AAAiB,MAAX,MAAM,CACd,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,MAAM,0BAAiB,kBAEnC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAS,aACb,EAAM,GAAG,CAAC,AAAC,GACV,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,KAAK,CAAA,CAEJ,QAAQ,WACR,GAAI,CAAE,EAAG,IAAK,QAAS,OAAQ,IAAK,EAAG,WAAY,YAAa,EAChE,cAAY,sBAEZ,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAS,EAAG,GAAI,CAAE,KAAM,EAAG,SAAU,CAAE,YAC5C,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAU,MAAM,WAAW,SAAS,QAAS,EAAG,GAAI,CAAE,SAAU,MAAO,YAC5E,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,KAAK,QAAQ,MAAO,EAAE,IAAI,EAAI,UACpC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,QAAQ,QAAQ,MAAM,0BAC/B,IAAI,KAAK,EAAE,SAAS,EAAE,cAAc,KAEtC,EAAE,KAAK,CACN,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,QAAQ,YAAY,GAAI,CAAE,WAAY,IAAK,GAAI,EAAI,EAAG,MAAM,CAAA,CAAA,WACrE,EAAE,KAAK,GAER,QAEN,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,QAAQ,QAAQ,GAAI,CAAE,WAAY,UAAW,WACtD,EAAE,IAAI,MAGX,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAU,MAAM,QAAS,YAC9B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,aAAW,YAAY,QAAS,IAAM,CAnE9D,EAmEwE,GAlExE,EAAQ,CAAE,GADC,GACM,EAAK,KAAK,EAAI,GAAI,KAAM,EAAK,IAAI,EAAI,GAAI,KAAM,EAAK,IAAI,EAAI,OAAQ,GACrF,EAAS,IACT,GAAQ,IAgEoE,cAAY,qBAC1E,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAA,KAET,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,aAAW,cAAc,QAAS,IAAM,EAAa,EAAE,EAAE,EAAG,cAAY,uBAClF,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAO,CAAA,CAAA,UA1BP,EAAE,EAAE,KAkCjB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CACL,KAAM,EACN,QAAS,IAAM,GAAQ,GACvB,SAAS,CAAA,CAAA,EACT,SAAS,KACT,WAAY,CACV,GAAI,CAAE,SAAU,CAAE,GAAI,OAAQ,GAAI,MAAO,EAAG,UAAW,CAAE,GAAI,OAAQ,GAAI,MAAO,CAAE,CACpF,YAEA,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,CACV,GAAI,CACF,QAAS,OACT,WAAY,SACZ,eAAgB,gBAChB,IAAK,CACP,YAEA,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,GAAG,CAAA,CAAC,GAAI,CAAE,QAAS,OAAQ,WAAY,SAAU,IAAK,GAAI,YACzD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,GAAG,CAAA,CACF,UAAU,MACV,IAAI,yBACJ,IAAI,OACJ,GAAI,CAAE,MAAO,GAAI,OAAQ,GAAI,UAAW,SAAU,IAEpD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,QAAQ,cAAM,EAAU,YAAc,gBAEpD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,aAAW,QAAQ,QAAS,IAAM,GAAQ,YAAQ,SAIhE,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,aAAa,CAAA,CAAC,GAAI,CAAE,QAAS,OAAQ,cAAe,SAAU,IAAK,EAAG,GAAI,CAAE,YAC3E,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CACR,MAAM,UACN,MAAO,EAAK,KAAK,EAAI,GACrB,SAAW,AAAD,GAAO,EAAS,AAAD,IAAO,AAAC,CAAE,GAAG,CAAC,CAAE,MAAO,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC,EAChE,cAAY,eAEd,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CACR,MAAM,OACN,MAAM,CAAA,CAAA,EACN,MAAO,EAAK,IAAI,EAAI,QACpB,SAAW,AAAD,GAAO,EAAQ,AAAC,IAAM,AAAC,CAAE,GAAG,CAAC,CAAE,KAAM,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC,EAC/D,cAAY,qBAEX,CAAC,aAAc,UAAW,SAAU,QAAS,QAAQ,CAAC,GAAG,CAAC,AAAC,GAC1D,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAS,MAAO,WACtB,GADY,MAKnB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CACR,MAAM,OACN,SAAS,CAAA,CAAA,EACT,QAAS,EACT,MAAO,EAAK,IAAI,CAChB,SAAU,AAAC,GAAM,EAAQ,AAAC,IAAM,AAAC,CAAE,GAAG,CAAC,CAAE,KAAM,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC,EAC/D,OAAO,CAAQ,EACf,WAAY,EACZ,cAAY,iBAGhB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,aAAa,CAAA,WACZ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAS,IAAM,GAAQ,YAAQ,WACvC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACL,QAAQ,YACR,QAAS,EACT,SAAU,GAAY,EACtB,cAAY,qBAEX,EAAU,eAAiB,qBAMxC,CD3KA,IAAA,EAAA,EAAA,CAAA,CAAA,OAiBe,SAAS,QA0CD,EAzCrB,IAAM,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAClB,EAAe,CAAA,EAAA,EAAA,eAAA,AAAe,IAC9B,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAClB,EAAK,MAAM,OAAO,CAAC,GAAQ,IAAM,GAAQ,EAAE,CAAC,EAAE,CAAI,GAAQ,GAE1D,CAAC,EAAU,EAAY,CAAG,EAAA,OAAK,CAAC,QAAQ,CAAqB,MAC7D,CAAC,EAAK,EAAO,CAAG,EAAA,OAAK,CAAC,QAAQ,CAAC,GAC/B,CAAC,EAAY,EAAc,CAAG,EAAA,OAAK,CAAC,QAAQ,CAAgB,MAC5D,CAAC,EAAQ,EAAU,CAAG,EAAA,OAAK,CAAC,QAAQ,CAAa,MAEvD,EAAA,OAAK,CAAC,SAAS,CAAC,KACd,IAAI,GAAU,EAMd,MALC,AAAD,WACE,GAAI,CAAC,EAAI,OACT,IAAM,EAAI,MAAM,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,GACtB,GAAS,EAAU,GACzB,CAAC,GACM,KACL,GAAU,CACZ,CACF,EAAG,CAAC,EAAG,EAEP,IAAM,EAAqB,EAAA,OAAK,CAAC,OAAO,CAAC,IACvC,AAAK,GAAQ,CAAT,EACI,CAAA,AADS,EACT,EAAA,cAAA,AAAc,IAAmB,MAAM,CAAC,AAAC,GAAM,EAAE,QAAQ,GAAK,EAAO,EAAE,EADvD,EAAE,CAEzB,CAAC,GAAQ,GAAG,EAOf,GALA,EAAA,OAAK,CAAC,SAAS,CAAC,KAEV,AAAM,UADA,GAAc,IAAI,QACT,EAAO,EAC5B,EAAG,CAAC,EAAa,EAEb,CAAC,EACH,MADW,AAET,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,GAAG,CAAA,CAAC,GAAI,CAAE,EAAG,CAAE,WACd,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,QAAQ,cAAK,wBAK/B,IAAM,EAAO,CAAA,EAAG,EAAO,SAAS,EAAI,GAAG,CAAC,EAAE,EAAO,QAAQ,EAAI,GAAA,CAAI,CAAC,IAAI,IAAM,kBAMtE,EAJJ,GAIwB,CAJpB,CAAC,AAI0B,CAAnB,IAJF,AAI0B,EAF7B,EAAI,OAAO,CAAC,kBAAmB,SAFrB,gBAKb,EAAQ,EAAO,QAAQ,EAAI,EAAO,eAAe,EAAI,yBAGrD,EAAkB,IAAM,EAAY,MAE1C,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,GAAG,CAAA,CAAC,GAAI,CAAE,EAAG,EAAG,QAAS,OAAQ,aAAc,CAAE,YAChD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAU,MAAM,WAAW,SAAS,QAAS,EAAG,GAAI,CAAE,GAAI,CAAE,YACjE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,IAAK,EAAO,IAAK,EAAM,GAAI,CAAE,MAAO,GAAI,OAAQ,EAAG,IAC3D,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,GAAG,CAAA,CAAC,GAAI,CAAE,KAAM,EAAG,SAAU,CAAE,YAC9B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,QAAQ,KAAK,MAAM,CAAA,CAAA,WAAE,IACjC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,QAAQ,QAAQ,MAAM,iBAAiB,MAAM,CAAA,CAAA,WAAE,OAE7D,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACL,QAAQ,WACR,QAAS,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,oBAAoB,CAAA,CAAA,GAC9B,QAde,AAAC,CAcP,EAd4C,EAAY,EAAE,aAAa,WAejF,YAGD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,SAAU,EAAU,MAAM,CAAQ,EAAW,QAAS,YAC1D,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,QAAS,KAAQ,IAAmB,EAAO,IAAI,CAAC,CAAC,SAAS,EAAE,EAAO,EAAE,CAAC,KAAK,CAAC,CAAG,WAAG,SAC5F,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CACP,QAAS,KAAQ,IAAmB,EAAO,IAAI,CAAC,CAAC,SAAS,EAAE,EAAO,EAAE,CAAC,OAAO,CAAC,CAAG,EACjF,GAAI,CAAE,MAAO,SAAU,WACxB,yBAML,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAO,CAAA,CAAC,GAAI,CAAE,GAAI,CAAE,IAErB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAI,CAAA,CAAC,MAAO,EAAK,SAAU,CAAC,EAAG,IAAM,EAAO,GAAI,GAAI,CAAE,GAAI,CAAE,YAC3D,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAG,CAAA,CAAC,MAAM,WACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAG,CAAA,CAAC,MAAM,QAAQ,cAAY,cAC/B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAG,CAAA,CAAC,MAAM,QAAQ,cAAY,iBAGxB,IAAR,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,QAAQ,WAAW,GAAI,CAAE,aAAc,CAAE,WAC7C,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,CAAC,GAAI,CAAE,EAAG,CAAE,YACtB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,GAAG,CAAA,CAAC,GAAI,CAAE,GAAI,EAAG,GAAI,EAAG,GAAI,EAAG,QAAS,OAAQ,WAAY,SAAU,IAAK,CAAE,YAC5E,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,MAAM,OAAO,MAAM,UAAU,QAAQ,aAC3C,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,CAAC,QAAQ,QAAQ,MAAM,2BAC/B,EAAM,MAAM,CAAC,cAGlB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAO,CAAA,CAAA,GACR,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,cAAc,CAAA,CAAA,YACjB,EAAM,GAAG,CAAC,AAAC,IACV,IAAM,EAAM,EAAE,EAAE,EAAI,CAAA,EAAG,EAAE,KAAK,EAAI,EAAE,EAAE,EAAI,GAAG,CAAC,EAAE,EAAE,OAAO,EAAI,GAAG,CAAC,EAAG,EAAU,QAAQ,EAAI,EAAE,MAAM,EAAI,EAAE,IAAI,EAAI,GAAA,CAAI,CAC9G,EAAS,IAAe,EACxB,EAAO,EAAE,MAAM,EAAI,EAAE,IAAI,EAAK,EAAU,QAAQ,EAAI,KAAK,GAAG,GAClE,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAK,CAAC,QAAQ,CAAA,WACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAQ,CAAA,CACP,gBACE,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,KAAK,CAAA,CAAC,WAAW,WAAW,QAAS,aACpC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,CAAC,QAAQ,QAAQ,MAAM,2BAC/B,IAAI,KAAK,GAAM,kBAAkB,GAAG,IAAE,IAAI,KAAK,GAAM,kBAAkB,MAE1E,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,KAAK,QAAQ,QAAS,IAAM,EAAc,EAAS,KAAO,YAC/D,EAAS,OAAS,qBAKzB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,YAAY,CAAA,CACX,QACE,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAU,MAAM,QAAS,EAAG,WAAW,SAAS,SAAS,iBAC9D,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,QAAQ,qBACjB,CAAC,EAAE,kBAAkB,EAAI,OAAA,CAAO,CAAI,IAAO,EAAD,CAAG,iBAAiB,EAAI,MAAA,CAAM,GAE3E,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,CAAC,QAAQ,QAAQ,MAAM,2BAAiB,KAC9C,EAAE,UAAU,EAAI,gBAErB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,CAAC,QAAQ,QAAQ,MAAM,2BAAiB,KAC9C,EAAE,QAAQ,EAAI,iBAIvB,UACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,QAAQ,QAAQ,MAAM,iBAAiB,MAAM,CAAA,CAAA,WACtD,EAAE,OAAO,EAAI,qBAKtB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAQ,CAAA,CAAC,GAAI,EAAQ,QAAQ,OAAO,aAAa,CAAA,CAAA,WAChD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,GAAG,CAAA,CAAC,GAAI,CAAE,GAAI,EAAG,GAAI,CAAE,WACtB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,QAAQ,QAAQ,MAAM,eAAe,GAAI,CAAE,WAAY,UAAW,WAC3E,EAAE,IAAI,EAAI,EAAE,IAAI,EAAI,qBAI3B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAO,CAAA,CAAA,KAzCW,EA4CzB,GACkB,IAAjB,EAAM,MAAM,EACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,GAAG,CAAA,CAAC,GAAI,CAAE,GAAI,EAAG,GAAI,CAAE,WACtB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,QAAQ,QAAQ,MAAM,0BAAiB,kCAStD,IAAR,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,GAAG,CAAA,CAAC,GAAI,CAAE,GAAI,CAAE,WACf,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAW,UAAW,EAAO,EAAE,KAG3B,IAAR,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,GAAG,CAAA,CAAC,GAAI,CAAE,GAAI,CAAE,WACf,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAW,EAAO,EAAE,OAK1C"}